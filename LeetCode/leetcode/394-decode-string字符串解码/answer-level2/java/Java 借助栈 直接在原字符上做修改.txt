**è§£æ³•ä¸€**

å€ŸåŠ©æ ˆç›´æ¥åœ¨åŸå­—ç¬¦ä¸Šåšæ”¹åŠ¨

```java
public String decodeString(String s) {
    if (s==null || s.length()<=0) {
        return "";
    }
    //è½¬æ¢ä¸ºStringBuilderæ¯”è¾ƒå¥½å¤„ç†,ä¸”æ•ˆç‡è¾ƒé«˜
    StringBuilder sb=new StringBuilder(s);
    Stack<Integer>  stack=new Stack<>();
    int i=0;//éå†ç´¢å¼•
    while(i<sb.length()) {
        if (sb.charAt(i)=='[') {
            stack.push(i);
        }else if(sb.charAt(i)==']'){
            int left=stack.pop();//å¯¹åº”å·¦æ‹¬å·ç´¢å¼•
            String temp=sb.substring(left+1,i);//ç›¸é‚»æ‹¬å·ä¸­çš„å­—ç¬¦
            int preInt=left;
            //'['å‰çš„æ•°å­—,ä¸€å¼€å§‹ä»¥ä¸ºåªæ˜¯ä¸ªä½æ•°,è¿˜æ˜¯æŒºéº»çƒ¦çš„
            while(preInt-1>=0 && sb.charAt(preInt-1)>='0' && sb.charAt(preInt-1) <='9'){
                preInt--;
            }
            //repeatæ¬¡æ•°
            int repeat=Integer.valueOf(sb.substring(preInt,left));
            //åˆ é™¤ k[encoded_string] 
            sb.delete(preInt,Math.min(i+1,sb.length()));
            for (int j=0;j<repeat;j++) {
                //ä»kä½ç½®é‡æ–°æ’å…¥å­—ç¬¦
                sb.insert(preInt,temp);
            }
            //é‡æ–°å®šä½ç´¢å¼•åˆ°å°¾éƒ¨
            i=preInt+(repeat*temp.length())-1;
        }
        i++;
    }
    return sb.toString();
}
```
ä¸€å¼€å§‹æ˜¯æƒ³ç”¨ä¸€ä¸ªé¢å¤–çš„Stringæ¥ä¿å­˜ç»“æœï¼Œç»“æœå‘ç°æ¯”è¾ƒéº»çƒ¦ï¼Œç´¢æ€§ç›´æ¥å°†åŸå­—ç¬¦è½¬æ¢ä¸ºStringBuilderï¼Œç„¶åå€ŸåŠ©apiç›´æ¥åœ¨åŸå­—ç¬¦ä¸Šåšæ”¹åŠ¨ï¼Œå› ä¸ºæ˜¯åœ¨åŸå­—ç¬¦ä¸Šåšæ”¹åŠ¨ï¼Œæ‰€ä»¥ç´¢å¼•çš„å˜åŒ–éœ€è¦é¢å¤–çš„æ³¨æ„ï¼Œè¿™ä¹Ÿæ˜¯æœ€éº»çƒ¦çš„ä¸€ç‚¹ï¼Œéœ€è¦åœä¸‹æ¥ç¨å¾®æ€è€ƒä¸‹æ‰èƒ½ç¡®å®šï¼Œå…¶ä»–çš„è¿˜å¥½ï¼Œæ­£å¸¸çš„æ€è·¯ï¼Œæœ€åˆWAäº†ä¸€å‘æ˜¯å› ä¸ºå¿½ç•¥äº†å‰é¢çš„æ•°å­—å¯èƒ½æ˜¯å¤šä½æ•°ğŸ˜‚

**è§£æ³•äºŒ**

é€’å½’çš„æ–¹å¼ï¼Œæ”¹æˆ`StringBuilder`åº”è¯¥ä¼šå¥½ä¸€ç‚¹ğŸ˜‚

```java
private int index=0; //å­—ç¬¦ç´¢å¼•ä¸‹æ ‡

public String decodeString(String s) {
    if (s==null || s.length()<=0) {
        return "";
    }
    String sb="";
    while(index<s.length()){
        if (s.charAt(index)==']') { //é‡åˆ°å³æ‹¬å·å°±ç»“æŸ
            index++;//indexå®šä½åˆ°å³æ‹¬å·ä¸‹ä¸€ä¸ª
            return sb;
        }else if(s.charAt(index)>='0' && s.charAt(index)<='9'){
            int temp=index;
            while(index<s.length() && s.charAt(index)!='['){
                index++;
            }
            int repeat=Integer.valueOf(s.substring(temp,index));
            index++;//è·³è¿‡'['
            String rs=decodeString(s);//ä»å·¦æ‹¬å·å¼€å§‹
            for (int i=0;i<repeat;i++) {
                sb+=rs;
            }
        }else{
            sb+=s.charAt(index++);
        }
    }
    return sb;
}
```