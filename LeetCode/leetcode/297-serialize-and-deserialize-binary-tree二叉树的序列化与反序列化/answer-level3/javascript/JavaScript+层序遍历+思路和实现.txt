## åºåˆ—åŒ–äºŒå‰æ ‘æ€è·¯

ä½¿ç”¨å¹¿åº¦ä¼˜å…ˆï¼ˆBFSï¼‰éå†æ‰€æœ‰èŠ‚ç‚¹ï¼ˆåŒ…æ‹¬ç©ºèŠ‚ç‚¹ï¼‰ï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š

1. åˆå§‹åŒ–å­—ç¬¦ä¸² res
2. åˆå§‹åŒ–é˜Ÿåˆ— queueï¼Œå°† root æ”¾å…¥é˜Ÿåˆ—
3. æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼š
    - é˜Ÿåˆ—ä¸ä¸ºç©ºï¼šå–å‡ºé˜Ÿé¦–èŠ‚ç‚¹ï¼Œå¦‚æœèŠ‚ç‚¹ä¸º nullï¼Œé‚£ä¹ˆ res æ›´æ–°ä¸º res + '#,'ï¼›å¦‚æœèŠ‚ç‚¹ä¸æ˜¯ nullï¼Œé‚£ä¹ˆ res æ›´æ–°ä¸º res + valï¼Œå¹¶ä¸”å°†èŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹ä¾æ¬¡åŠ å…¥ queueã€‚ç»§ç»­å¾ªç¯ã€‚
    - é˜Ÿåˆ—ä¸ºç©ºï¼šç»“æŸå¾ªç¯
4. è¿”å›"[" + res + "]"

```
    1
   / \
  2   3
     / \
    4   5
```

ä»¥ä¸Šé¢è¿™æ£µäºŒå‰æ ‘ä¸ºä¾‹ï¼Œå®ƒçš„åºåˆ—åŒ–ç»“æœæ˜¯`"[1,2,3,#,#,4,5,#,#,#,#]"`

åºåˆ—åŒ–çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/xu-lie-hua-er-cha-shu-lcof/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-13-serialize-and-deserialize-btree/

/**
 * Encodes a tree to a single string.
 *
 * @param {TreeNode} root
 * @return {string}
 */
var serialize = function(root) {
    if (!root) {
        return "[]";
    }

    let res = "";
    let node = root;
    const queue = [node];
    while (queue.length) {
        const front = queue.shift();
        if (front) {
            res += `${front.val},`;
            queue.push(front.left);
            queue.push(front.right);
        } else {
            res += "#,";
        }
    }

    res = res.substring(0, res.length - 1); // å»æ‰æœ€åä¸€ä¸ªé€—å·

    return `[${res}]`;
};
```

## ååºåˆ—åŒ–äºŒå‰æ ‘æ€è·¯

ä»¥å‰é¢çš„äºŒå‰æ ‘ä¸ºä¾‹ï¼Œååºåˆ—è¯å°±æ˜¯å°†å­—ç¬¦ä¸²`"[1,2,3,#,#,4,5,#,#,#,#]"`é‡æ–°è¿˜åŸæˆåŸæ¥çš„äºŒå‰æ ‘ã€‚

ååºåˆ—åŒ–æµç¨‹å¦‚ä¸‹ï¼š

-   å»æ‰å­—ç¬¦ä¸² res å‰åçš„`[`å’Œ`]`ï¼Œå¹¶å°†å…¶æŒ‰ç…§`,`é€—å·åˆ‡åˆ†å¾—åˆ°æ•°ç»„ nodes
-   åˆå§‹åŒ–é˜Ÿåˆ— queueï¼Œæ”¾å…¥ nodes çš„ç¬¬ä¸€ä¸ªå€¼å¯¹åº”çš„èŠ‚ç‚¹ï¼Œnodes å¼¹å‡ºç¬¬ä¸€ä¸ªå€¼
-   æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼š
    -   é˜Ÿåˆ—ä¸ä¸ºç©ºã€‚ä» queue å–å‡ºé˜Ÿé¦–å…ƒç´ ã€‚ä» nodes ä¸­å–å‡ºç¬¬ä¸€ä¸ªå€¼å’Œç¬¬äºŒå€¼ï¼Œä¾æ¬¡å¤„ç†ã€‚ç»§ç»­å¾ªç¯ã€‚
    -   é˜Ÿåˆ—ä¸ºç©ºã€‚ç»“æŸå¾ªç¯ã€‚
-   è¿”å›æ ¹èŠ‚ç‚¹ã€‚

**ååºåˆ—åŒ–å‡½æ•°çš„è®¾è®¡å…³é”®æ˜¯ï¼šæ•°ç»„ nodes å–å‡ºå…ƒç´ çš„é¡ºåºå’ŒåŸäºŒå‰æ ‘å±‚åºéå†çš„é¡ºåºæ˜¯å¯¹åº”çš„ã€‚**

ååºåˆ—çš„å‡½æ•°å®ç°å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/xu-lie-hua-er-cha-shu-lcof/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-13-serialize-and-deserialize-btree/

/**
 * Decodes your encoded data to tree.
 *
 * @param {string} data
 * @return {TreeNode}
 */
var deserialize = function(data) {
    if (data.length <= 2) {
        return null;
    }

    const nodes = data.substring(1, data.length - 1).split(",");
    const root = new TreeNode(parseInt(nodes[0]));
    nodes.shift();

    const queue = [root];
    while (queue.length) {
        const node = queue.shift();
        // ç¬¬ä¸€ä¸ªæ˜¯å·¦èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è·³è¿‡
        const leftVal = nodes.shift();
        if (leftVal !== "#") {
            node.left = new TreeNode(leftVal);
            queue.push(node.left);
        }
        // ç¬¬äºŒä¸ªæ˜¯å³èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¸ºç©ºï¼Œç›´æ¥è·³è¿‡
        const rightVal = nodes.shift();
        if (rightVal !== "#") {
            node.right = new TreeNode(rightVal);
            queue.push(node.right);
        }
    }

    return root;
};
```

## æ›´å¤šèµ„æ–™

-   **ğŸ“–Blogï¼š[å‰‘æŒ‡ Offer é¢˜è§£ + JS ä»£ç ](https://xxoo521.com/algorithm/)**
-   **ğŸ±Github ï¼š[https://github.com/dongyuanxin/blog](https://github.com/dongyuanxin/blog)**
-   **ğŸŒŸ å…¬ä¼—å·ï¼š[å¿ƒè°­åšå®¢](https://tva1.sinaimg.cn/large/006tNbRwly1g9xhhp50jpj31bi0hcju4.jpg)**
