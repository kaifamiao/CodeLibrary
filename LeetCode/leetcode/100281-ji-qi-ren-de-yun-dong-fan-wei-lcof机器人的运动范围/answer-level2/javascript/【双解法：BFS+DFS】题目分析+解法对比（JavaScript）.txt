
## é¢˜ç›®åˆ†æž

é¢˜ç›®æåˆ°äº†æ•°å­—çš„æ•°ä½ä¹‹å’Œï¼Œè¿™ä¸ªåˆ©ç”¨å–ä½™è¿ç®—å³å¯ï¼Œå¹¶å°†å…¶å•ç‹¬å°è£…å‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/ji-qi-ren-de-yun-dong-fan-wei-lcof/
// åŽŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-20-moving-count/

/**
 * è®¡ç®—æ•°å­— n çš„æ•°ä½ä¹‹å’Œ
 * @param {number} n
 * @return {number}
 */
function bitSum(n) {
    let res = 0;
    while (n) {
        res = res + (n % 10);
        n = Math.floor(n / 10);
    }
    return res;
}
```

**è¦æ³¨æ„çš„æ˜¯ï¼šèƒ½æ»¡è¶³æ•°ä½ä¹‹å’Œçš„è¦æ±‚çš„åæ ‡ï¼Œä¸ä¸€å®šèƒ½è¾¾åˆ°**ã€‚å› ä¸ºé¢˜ç›®æåˆ°äº†æœºå™¨äººçš„ç§»åŠ¨æ˜¯æ¯æ¬¡å¯ä»¥å‘ä¸Šä¸‹å·¦å³ 4 ä¸ªæ–¹å‘ç§»åŠ¨ä¸€æ ¼ï¼Œå¹¶ä¸”å¼€å§‹çš„åæ ‡æ˜¯`(0, 0)`ã€‚

ä¾‹å¦‚å½“ m=36ï¼Œn=15ï¼Œk=9 æ—¶ï¼Œç”±äºŽåªèƒ½å‘åˆæ³•åæ ‡ç§»åŠ¨ 1 æ ¼ï¼Œä»Ž`(18,0)`å¹¶ä¸èƒ½åˆ°è¾¾`(20, 0)`ï¼Œå³ä½¿`(20, 0)`æ»¡è¶³æ•°ä½ä¹‹å’Œçš„æ¡ä»¶ã€‚

è¿™å°±éœ€è¦ä½¿ç”¨æ·±åº¦ä¼˜å…ˆéåŽ†ï¼ˆDFSï¼‰æˆ–è€…å¹¿åº¦ä¼˜å…ˆéåŽ†ï¼ˆBFSï¼‰ï¼Œè€Œä¸æ˜¯ç›´æŽ¥æ£€æŸ¥æ¯ä¸ªå…ƒç´ ã€‚

## è§£æ³• 1: å¹¿åº¦ä¼˜å…ˆéåŽ†ï¼ˆæŽ¨èï¼‰

å’Œæ™®é€š BFS ç›¸æ¯”ï¼Œæœ‰ä¸¤ç‚¹ä¸åŒï¼š

-   éœ€è¦è°ƒç”¨ bitSum æ¥æ£€æŸ¥æ•°ä½ä¹‹å’Œ
-   **å› ä¸ºä»Žå·¦ä¸Šè§’å¼€å§‹éåŽ†ï¼Œå› æ­¤åªéœ€è¦éåŽ†ã€Œå³ã€å’Œã€Œä¸‹ã€è¿™ä¸¤ä¸ªæ–¹å‘**

ä»£ç å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/ji-qi-ren-de-yun-dong-fan-wei-lcof/
// åŽŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-20-moving-count/
/**
 * @param {number} m
 * @param {number} n
 * @param {number} k
 * @return {number}
 */
var movingCount = function(m, n, k) {
    let res = 0;
    const directions = [
        [1, 0],
        [0, 1]
    ];
    const queue = [[0, 0]];
    const visited = {
        "0-0": true
    }; // æ ‡è®° (x,y) æ˜¯å¦è¢«è®¿é—®è¿‡

    while (queue.length) {
        const [x, y] = queue.shift();
        //  (x, y) çš„æ•°ä½ä¹‹å’Œä¸ç¬¦åˆè¦æ±‚
        // é¢˜ç›®è¦æ±‚èŠ‚ç‚¹æ¯æ¬¡åªèƒ½èµ°1æ ¼ï¼Œæ‰€ä»¥æ— æ³•ä»Žå½“å‰åæ ‡ç»§ç»­å‡ºå‘
        if (bitSum(x) + bitSum(y) > k) {
            continue;
        }
        ++res;

        for (const direction of directions) {
            const newx = direction[0] + x;
            const newy = direction[1] + y;
            if (
                !visited[`${newx}-${newy}`] &&
                newx >= 0 &&
                newy >= 0 &&
                newx < m &&
                newy < n
            ) {
                queue.push([newx, newy]);
                visited[`${newx}-${newy}`] = true;
            }
        }
    }

    return res;
};
```

æ—¶é—´å¤æ‚åº¦æ˜¯$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯$O(N)$ã€‚

## è§£æ³• 2: æ·±åº¦ä¼˜å…ˆéåŽ†

DFS ä¸å¦‚ BFSï¼Œé™¤äº†é€’å½’è°ƒç”¨å¤–ï¼Œè¿˜è¦å°è¯• 4 ä¸ªæ–¹å‘ï¼ˆBFS åªè¦ 2 ä¸ªï¼‰ã€‚ä»£ç å®žçŽ°å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/ji-qi-ren-de-yun-dong-fan-wei-lcof/
// åŽŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-20-moving-count/
/**
 * @param {number} m
 * @param {number} n
 * @param {number} k
 * @return {number}
 */
var movingCount = function(m, n, k) {
    let res = 0;
    const directions = [
        [-1, 0],
        [1, 0],
        [0, -1],
        [0, 1]
    ];
    const visited = {};
    dfs(0, 0);
    return res;

    function dfs(x, y) {
        visited[`${x}-${y}`] = true;
        if (bitSum(x) + bitSum(y) > k) {
            return;
        }
        ++res;

        for (const direction of directions) {
            const newx = direction[0] + x;
            const newy = direction[1] + y;
            if (
                !visited[`${newx}-${newy}`] &&
                newx >= 0 &&
                newy >= 0 &&
                newx < m &&
                newy < n
            ) {
                dfs(newx, newy);
            }
        }
    }
};
```

æ—¶é—´å¤æ‚åº¦æ˜¯$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯$O(N)$ã€‚

## æ›´å¤šèµ„æ–™

-   **ðŸ“–Blogï¼š[å‰‘æŒ‡ Offer é¢˜è§£ + JS ä»£ç ](https://xxoo521.com/algorithm/)**
-   **ðŸ±Github ï¼š[https://github.com/dongyuanxin/blog](https://github.com/dongyuanxin/blog)**
-   **ðŸŒŸ å…¬ä¼—å·ï¼š[å¿ƒè°­åšå®¢](https://tva1.sinaimg.cn/large/006tNbRwly1g9xhhp50jpj31bi0hcju4.jpg)**
