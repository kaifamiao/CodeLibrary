### ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼š
```
è¾“å…¥: 
    1
   / \
  2   3
 / \  /
4  5 6

```

```
ä¸€ å®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨ï¼š
1. æ¯ä¸ªrootéƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼ˆäºŒå‰æ ‘æ˜¯å…¨æ»¡ç»“æ„ï¼‰
2. æœ€åº•å±‚å¯ä»¥ä¸å…¨æ»¡ï¼Œä½†è¦ä¿è¯å·¦è¾¹è¦å…ˆæ»¡
```
```
äºŒ å…³äºå±‚æ•°ï¼šå®Œå…¨äºŒå‰æ ‘çš„å±‚æ•°å¯ä»¥æœ‰ä¸¤ç§å†™æ³•ï¼Œå¦‚æœè¦è®¡ç®—é™¤æœ€åä¸€å±‚å¤–ï¼Œä¸Šé¢æ‰€æœ‰çš„å±‚æ•°ï¼ˆğŸ‘‡æ–¹æ³•ä¸€ï¼‰éœ€è¦è¿™æ ·å†™ï¼š

while root.left:
    root = root.left
    level += 1
return level    --> level = 2

å¦‚æœè¦è®¡ç®—æ‰€æœ‰çš„å±‚æ•°ï¼ˆğŸ‘‡æ–¹æ³•äºŒï¼‰ï¼Œéœ€è¦è¿™æ ·å†™:
while root
    root = root.left
    level += 1
return level   ---> level = 3   

```
```
ä¸‰ åœ¨äºŒå‰æ ‘ä¸Šå¦‚ä½•è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼ˆæœç´¢ï¼‰
1. å¯¹äºå¼ä¾‹äºŒå‰æ ‘æœ€åä¸€å±‚è¿›è¡ŒäºŒåˆ†æœç´¢: left, right = 0, 2*2-1ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥éå†å®Œå…¨äºŒå‰æ ‘çš„æœ€åä¸€å±‚ï¼Œé¦–å…ˆæˆ‘ä»¬å…ˆæŸ¥æ‰¾ mid åœ¨ä¸åœ¨è¿™è¿™ä¸€æ£µæ ‘ä¸Š mid = left + (right - left)//2 = 1 (index = 1 å¯¹åº”å¼ä¾‹ä¸­5æ˜¯å¦åœ¨æ ‘ä¸Š)ï¼Œå¦‚æœæŸ¥æ‰¾åˆ°æœ€åº•å±‚ï¼Œï¼ˆè¿™é‡Œå°±æ˜¯è¦éå†dæ¬¡çš„åŸå› ï¼‰å‘ç°nodeä¸ä¸ºç©ºï¼Œåˆ™è¯´æ˜è¯¥index= mid å¯¹åº”çš„èŠ‚ç‚¹åœ¨æ ‘ä¸Šå­˜åœ¨ï¼Œå³ï¼š
            for _ in range(d):  # æŸ¥æ‰¾dæ¬¡ ï¼ˆd = 2) 
                mid = left + (right - left) // 2
                if idx <= mid:
                    node = node.left
                    right = mid
                else:
                    node = node.right
                    left = mid
2. å¦‚æœè¯¥midåœ¨æ ‘ä¸Šå°±left + 1, å› ä¸ºäºŒå‰æ ‘æ€§è´¨2ï¼ˆğŸ‘†ï¼‰å³ï¼š
            if exist(mid, d, root):
                left = mid + 1
            else:
                right = mid - 1
```
```
å›› æ–¹æ³•äºŒæ¯”è¾ƒå¥½ç†è§£ï¼Œç®€å•çš„é€’å½’ã€‚
```

### ä»£ç å¦‚ä¸‹ï¼ˆğŸ‘‡ï¼‰
#### æ–¹æ³•ä¸€
```
class Solution:
    def countNodes(self, root: TreeNode) -> int:
        def countlevel(root):
            level = 0
            if not root: return 0
            while root.left:
                root = root.left
                level += 1
            return level
        
        def exist(idx, d, node):  # åœ¨æ ‘ä¸Šæ‰¾ å¦‚æœå½“å‰ç»™çš„idx å°äºmid æŸ¥æ‰¾æ ‘çš„å·¦è¾¹ï¼Œå¤§äºå°±æŸ¥æ‰¾æ ‘çš„å³è¾¹
            left, right = 0, 2 ** d - 1
            for _ in range(d):
                mid = left + (right - left) // 2
                if idx <= mid:
                    node = node.left
                    right = mid
                else:
                    node = node.right
                    left = mid
            return node is not None
        
        if not root: return 0
        d = countlevel(root)
        if d == 0: return 1
        left, right = 0, 2 ** d - 1
        while left <= right:  # æ¯æ¬¡ç»™existçš„éƒ½æ˜¯mid å†åœ¨æ ‘ä¸Šæ‰¾midæ˜¯å¦å­˜åœ¨ 
            mid = left + (right - left) // 2
            if exist(mid, d, root):
                left = mid + 1
            else:
                right = mid - 1
        return left + 2 ** d - 1
```
#### æ–¹æ³•äºŒ
```
class Solution:
    def countNodes(self, root: TreeNode) -> int:
        left_node = root
        right_node = root
        hl = hr = 0
        while left_node:
            left_node = left_node.left
            hl += 1
        while right_node:
            right_node = right_node.right
            hr += 1
        
        if hr == hl: return 2 ** hl - 1
        else:
            return 1 + self.countNodes(root.left)  + self.countNodes(root.right)
```
