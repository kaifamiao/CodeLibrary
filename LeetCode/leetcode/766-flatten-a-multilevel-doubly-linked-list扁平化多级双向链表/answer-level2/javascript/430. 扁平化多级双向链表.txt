é‡åˆ°é—®é¢˜æˆ‘ä»¬é¦–å…ˆè¦å…ˆææ¸…æ¥šé—®é¢˜åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œç„¶åå†æƒ³åŠæ³•è§£å†³ã€‚å¯¹äº **é“¾è¡¨** çš„é—®é¢˜å…¶å®å¤§éƒ¨åˆ†éƒ½ä¸ç®—éš¾ï¼Œå†™ä»£ç ä¹‹å‰æœ€å¥½åŠ¨åŠ¨ç¬”åœ¨çº¸ä¸Šç”»ä¸€ä¸‹ï¼Œæ€è·¯ä¾¿ä¼šæ¸…æ™°å¾ˆå¤šã€‚

## é¢˜ç›®å‰–æ

é¢˜ç›®ä¸­æè¿°è¿™æ ·ä¸€ä¸ªç»“æ„çš„é“¾è¡¨ï¼š

```javascript
function Node(val,prev,next,child) {
    this.val = val;
    this.prev = prev;
    this.next = next;
    this.child = child;
}
```
æ‰€ä»¥è¿™ä¸ä»…ä»…æ˜¯ä¸€ä¸ª **åŒå‘** é“¾è¡¨ï¼ŒåŒæ—¶å®ƒè¿˜å¯èƒ½å­˜åœ¨ **å­é“¾è¡¨**  

æˆ‘ä»¬å†æ¥çœ‹çœ‹å®˜æ–¹æä¾›çš„è¾“å…¥è¾“å‡ºä¾‹å­ğŸ‘‡

**è¾“å…¥**ï¼š
```javascript
 1---2---3---4---5---6--NULL
         |
         7---8---9---10--NULL
             |
             11--12--NULL
```
**è¾“å‡º:**
```javascript
1-2-3-7-8-11-12-9-10-4-5-6-NULL
```

æ‰å¹³åŒ–çš„æ­¥éª¤å¯ä»¥çœ‹æˆè¿™æ ·ï¼š

ç¬¬ä¸€æ­¥ï¼š
```javascript
 1---2---3---4---5---6--NULL
         |
         7---8---11---12---9---10--NULL
```
ç¬¬äºŒæ­¥ï¼š
```javascript
1---2---3---7---8---11---12---9---10---4---5---6--NULL
```

æ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦é€’å½’å¤„ç† **å­é“¾è¡¨**ï¼Œå†æŠŠå®ƒè·Ÿ **çˆ¶é“¾è¡¨** æ‹¼æ¥åœ¨ä¸€èµ·ã€‚

## æ¢³ç†é€»è¾‘

åˆ†æå®Œé¢˜ç›®ä¹‹åæˆ‘ä»¬æ¥æ¢³ç†ä¸‹é€»è¾‘ğŸ‘‡

- æ‰¾åˆ° **å­é“¾è¡¨** å¹¶ä¸”æŠŠå®ƒæ‹¼æ¥åˆ° **çˆ¶é“¾è¡¨** çš„ **ä¸‹ä¸€ä¸ªèŠ‚ç‚¹** ä¸Š
- å¦‚æœ å­˜åœ¨ **å­å­é“¾è¡¨**ï¼Œé‚£ä¹ˆå…ˆå¤„ç† **å­å­é“¾è¡¨**

æ‹¼æ¥çš„é€»è¾‘å¯ä»¥æ›´åŠ ç»†åŒ–ï¼Œå¦‚ä¸‹ğŸ‘‡

- ä¿å­˜ **å­é“¾è¡¨** çš„ **ç¬¬ä¸€ä¸ªèŠ‚ç‚¹**
- ä¿å­˜ **å­é“¾è¡¨** çš„ **å‰ä¸€ä¸ªèŠ‚ç‚¹** å’Œè¿™ä¸ªèŠ‚ç‚¹çš„ **ä¸‹ä¸€ä¸ªèŠ‚ç‚¹**
- ä¿å­˜ **å­é“¾è¡¨** çš„ **æœ€åä¸€ä¸ªèŠ‚ç‚¹**
- æœ‰äº† **å­é“¾è¡¨** çš„ **é¦–å°¾èŠ‚ç‚¹** å’Œ **å‰åèŠ‚ç‚¹**ï¼Œ å°±å¯ä»¥æŠŠ **å­é“¾è¡¨** æ‹¼æ¥åˆ° **çˆ¶é“¾è¡¨** ä¸Š


## ç¤ºä¾‹ä»£ç 

```javascript
/**
 * @param {Node} head
 * @return {Node}
 */
var flatten = function(head) {
    dfs(head)
    function dfs (head) {
        let target = head, pre = null, last = null
        while (target) {
            let next = target.next, child = target.child
            if (child) {
                target.next = child
                child.prev = target
                target.next = child
                last = dfs(child)
                last.next = next
                pre = last
                target.child = null
                if (next) {
                    next.prev = last
                }
            } else {
                pre = target
            }
            target = next
        }
        return pre
    }
    return head
};
```

å½“ç„¶è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œ``next`` ã€ ``prev`` å’Œ ``child`` æŒ‡é’ˆéƒ½å¯èƒ½æ˜¯ç©ºçš„ï¼Œå†™ä»£ç çš„æ—¶å€™éœ€è¦æŠŠè¿™äº›æƒ…å†µéƒ½è€ƒè™‘è¿›å»ã€‚