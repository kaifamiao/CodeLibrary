æˆ‘å°±æ˜¯é—²å¾—*ç–¼å“ˆå“ˆç”¨çŸ©é˜µä¹˜æ³•å†™æ–æ³¢é‚£å¥‘ğŸ˜‚

æ–æ³¢é‚£å¥‘f(n)å¯ä»¥é€šè¿‡çŸ©é˜µä¹˜æ³•æ¥è®¡ç®—ï¼Œå¦‚ä¸‹ï¼š
$$
\left[
 \begin{matrix}
   f(n) \\
   f(n-1)
  \end{matrix}
  \right] = \left[
 \begin{matrix}
   1 & 1\\
   1 & 0
  \end{matrix}
  \right] \left[
 \begin{matrix}
   f(n-1) \\
   f(n-2)
  \end{matrix}
   \right] = \left[
 \begin{matrix}
   1 & 1\\
   1 & 0
  \end{matrix}
  \right]^{n-1} \left[
 \begin{matrix}
   f(1) \\
   f(0)
  \end{matrix}
   \right] 
$$
å³è®¡ç®—ï¼š
$$
\left[
 \begin{matrix}
   1 & 1\\
   1 & 0
  \end{matrix}
  \right]^{n-1} \left[
 \begin{matrix}
   1\\
   0
  \end{matrix}
   \right] 
$$

å¦‚ä¸Šç´¯ä¹˜æ˜¯O(N)çš„ï¼Œå¯ä»¥é€šè¿‡é€’å½’æˆ–è€…ä½è¿ç®—æ¥ä¼˜åŒ–æˆO(logN)ï¼Œå³å¿«é€Ÿå¹‚ï¼Œä¸‹è¾¹å„¿ç»™å‡ºäº†é€’å½’å’Œä½è¿ç®—ä¿©æ–¹æ³•ã€‚

``` Java
class Solution {
    public int fib(int n) {
        if (n == 0 || n == 1) {
            return n;
        }
        int[][] m = new int[][] {{1, 1}, {1, 0}};
        int[][] originM = new int[][] {{1}, {0}}; 
        int[][] res = matrixMul(matrixPow(m, n - 1), originM); 
        return res[0][0];
    }

    int[][] matrixMul(int[][] a, int[][] b) {
        int row = a.length;
        int col = b[0].length;
        int[][] res = new int[row][col];
        
        for (int i = 0; i < row; i++) {
            for (int k = 0; k < b.length; k++) {
                for (int j = 0; j < col; j++) {  // çŸ©é˜µä¹˜æ³•æ—¶æ³¨æ„æŒ‰è¡Œè¯»çŸ©é˜µbå¯ä»¥åˆ©ç”¨cpuç¼“å­˜æ¥åŠ é€Ÿå“ˆ
                    res[i][j] += a[i][k] * b[k][j];
                }
            }
        }
        return res;
    }

    // é€’å½’å®ç°logNå¿«é€Ÿå¹‚
    int[][] matrixPow (int[][] m, int n) {
        if (n == 1) {
            return m;
        }
        int[][] res = matrixPow(m, n / 2);
        return (n & 1) == 0? matrixMul(res, res): matrixMul(matrixMul(res, res), m);
    }

    // ä½è¿ç®—å®ç°logNå¿«é€Ÿå¹‚
    int[][] matrixPow (int[][] m, int n) {
        int[][] res = new int[][] {{1, 0}, {0, 1}};
        while (n > 0) {
            // æ¯”å¦‚13çš„2è¿›åˆ¶æ˜¯1101ï¼Œå³2^3 + 2^2 + 2^0, å³x^13 = x^(2^3 + 2^2 + 2^0) = x^8*x^4*x
            if ((n & 1) == 1) {
                res = matrixMul(res, m);
            }
            n >>= 1;
            m = matrixMul(m, m);
        }
        return res;
    }

    
}

```
