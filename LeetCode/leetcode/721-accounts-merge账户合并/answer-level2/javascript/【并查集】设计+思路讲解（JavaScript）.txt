é¢˜ç›®æåˆ°ï¼Œç”¨æˆ·å¯èƒ½ä¼šé‡åï¼Œä¸èƒ½é€šè¿‡ç”¨æˆ·ååˆ¤æ–­ç”¨æˆ·ï¼Œåº”è¯¥é€šè¿‡é‚®ç®±åœ°å€ã€‚å¹¶ä¸”ä¸€ä¸ªç”¨æˆ·ç”±å¤šä¸ªé‚®ç®±åœ°å€ï¼Œè¦åšçš„å°±æ˜¯å°†åŒä¸€ä¸ªç”¨æˆ·çš„å¤šä¸ªé‚®ç®±åœ°å€åˆå¹¶åˆ°ä¸€èµ·ã€‚

## è§£æ³•ï¼šå¹¶æŸ¥é›†

å€ŸåŠ©å¹¶æŸ¥é›†ï¼Œæ•´ä½“çš„å¤„ç†æ€è·¯å¦‚ä¸‹ï¼š

1. åˆå§‹åŒ–å¹¶æŸ¥é›† ufã€‚åˆå§‹åŒ–æ˜ å°„ mapï¼Œä¿å­˜ `email => username` çš„æ˜ å°„
2. éå† accounts ä¸­çš„æ¯ä¸ªåˆ—è¡¨ account
    - ä» account åˆ—è¡¨çš„ç¬¬ 2 ä¸ªå…ƒç´ å¼€å§‹éå†ï¼Œå°† `email => username` ä¿å­˜åˆ° map ä¸­ï¼Œå°†å½“å‰å…ƒç´ å’Œä¸‹ä¸€ä¸ªå…ƒç´ æ”¾å…¥ uf ä¸­
3. åˆå§‹åŒ–æ˜ å°„ setsï¼Œä¿å­˜ `email => email[]` çš„æ˜ å°„ã€‚
4. å¾ªç¯éå† map çš„é”®ï¼Œå°†å±äºåŒä¸€è¿é€šåˆ†é‡ï¼ˆåŒä¸€ç”¨æˆ·ï¼‰çš„æ‰€æœ‰é‚®ç®±æ”¾å…¥å¯¹åº”çš„åˆ—è¡¨ä¸­ã€‚
5. éå† sets çš„é”®å’Œå€¼ï¼Œé€šè¿‡ map å¯å¾—åˆ°å¯¹åº”çš„ usernameï¼Œè€Œå€¼å°±æ˜¯ç”¨æˆ·çš„æ‰€æœ‰é‚®ç®±ã€‚

ç”±äº JavaScript ä¸å­˜åœ¨å¹¶æŸ¥é›†ï¼Œæ‰€ä»¥éœ€è¦ diyã€‚æ•´ä½“ä»£ç å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/accounts-merge/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-28-redundant-connection/

class UnionFind {
    constructor() {
        this.parent = new Map();
    }

    // æŸ¥æ‰¾å…ƒç´ æ‰€åœ¨é›†åˆ
    find(x) {
        while (this.parent.has(x)) {
            x = this.parent.get(x);
        }
        return x;
    }

    // åˆå¹¶ä¸¤ä¸ªé›†åˆ
    union(p, q) {
        const rootP = this.find(p);
        const rootQ = this.find(q);
        if (rootP !== rootQ) {
            this.parent.set(this.find(p), this.find(q));
        }
    }
}

const cmp = (x, y) => {
    if (x < y) return -1;
    if (x > y) return 1;
    return 0;
};

/**
 * @param {string[][]} accounts
 * @return {string[][]}
 */
var accountsMerge = function(accounts) {
    const uf = new UnionFind();
    const map = {}; // email => name

    // æ­¥éª¤1:å°†å±äºåŒä¸€é›†åˆçš„emailè¿›è¡Œâ€œè¿çº¿â€
    for (const account of accounts) {
        for (let i = 1; i < account.length; ++i) {
            map[account[i]] = account[0];
            if (i < account.length - 1) {
                uf.union(account[i], account[i + 1]);
            }
        }
    }
    // æ­¥éª¤2: å°†å±äºåŒä¸€è¿é€šåˆ†é‡ï¼ˆåŒä¸€ç”¨æˆ·ï¼‰çš„æ‰€æœ‰é‚®ç®±æ”¾å…¥å¯¹åº”çš„åˆ—è¡¨ä¸­
    const sets = {}; // key: string; value: string[]
    for (const email in map) {
        const root = uf.find(email);
        if (!sets[root]) {
            sets[root] = [];
        }
        sets[root].push(email);
    }

    const res = [];
    for (const root in sets) {
        sets[root].sort(cmp);
        res.push([map[root], ...sets[root]]);
    }
    return res;
};
```

## æ›´å¤šèµ„æ–™

**è‹¥æœ‰é”™è¯¯ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚è‹¥å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªã€Œå…³æ³¨+ç‚¹èµã€ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›** ğŸ‘‡

-   **ğŸ“–Blogï¼š[å‰‘æŒ‡ Offer + Leetcode é¢˜è§£](https://xxoo521.com/algorithm/)**
-   **ğŸ±Github ï¼š[https://github.com/dongyuanxin/blog](https://github.com/dongyuanxin/blog)**
-   **ğŸŒŸ å…¬ä¼—å·ï¼š[å¿ƒè°­åšå®¢](https://tva1.sinaimg.cn/large/006tNbRwly1g9xhhp50jpj31bi0hcju4.jpg)**