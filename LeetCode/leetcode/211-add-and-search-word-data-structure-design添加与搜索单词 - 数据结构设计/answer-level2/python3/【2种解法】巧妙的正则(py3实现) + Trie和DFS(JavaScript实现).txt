
## é¢˜ç›®åˆ†æ

çœ‹åˆ°é¢˜ç›®ï¼Œç¬¬ä¸€ä¸ªç›´è§‰æ˜¯å°†å•è¯éƒ½å­˜æ”¾åœ¨æ•°ç»„ä¸­ã€‚æ¯æ¬¡åŒ¹é…çš„æ—¶å€™ï¼Œå¾ªç¯éå†æ•°ç»„ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨å¯ä»¥åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚

ä½†æ˜¯è¿™ç§æš´åŠ›æ³•çš„æ—¶é—´å¤æ‚åº¦é«˜ï¼Œåœ¨å¹³å°ä¸Šæ— æ³• acã€‚å› æ­¤è¦æƒ³å…¶ä»–çš„æ–¹æ³•ã€‚

## è§£æ³• 1: å·§å¦™çš„æ­£åˆ™è¡¨è¾¾å¼

æœ‰ä¸€ç§éå¸¸å·§å¦™çš„æ­£åˆ™è¡¨è¾¾å¼æ–¹æ³•ï¼šæ‰€æœ‰çš„å•è¯ä¸å†å­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼Œ**è€Œæ˜¯é€šè¿‡å‰åæ·»åŠ â€œ#â€æ¥è¿›è¡Œåˆ†å‰²ï¼ˆæ ‡è¯†å•è¯ç•Œé™ï¼‰**ã€‚

ä¾‹å¦‚ä¾æ¬¡æ·»åŠ äº†â€œbadâ€ã€â€œmadâ€ã€‚é‚£ä¹ˆå†…éƒ¨å­—ç¬¦ä¸²æ˜¯ï¼šâ€œ#bad#mad#â€ã€‚å½“æˆ‘ä»¬è¦åŒ¹é…ç›®æ ‡ä¸²â€œ.adâ€æ—¶ï¼Œåªéœ€è¦åœ¨ç›®æ ‡ä¸²å‰åæ·»åŠ â€œ#â€å³å¯ã€‚

åœ¨ leetcode ä¸Šï¼Œæœ¬é¢˜çš„ js å†™æ³•æ— æ³• acï¼Œä½†æ˜¯ python3 çš„å¯ä»¥ã€‚åº”è¯¥æ˜¯åˆ¤å®šæ¡ä»¶æ¯”è¾ƒå®½æ¾ï¼Œä¸‹é¢çš„ä»£ç  ac èŠ±è´¹äº† 2924msã€‚

```python
# acåœ°å€: https://leetcode-cn.com/problems/add-and-search-word-data-structure-design/
# åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-29-add-and-search-word/

from re import search

class WordDictionary:

    def __init__(self):
        """
        Initialize your data structure here.
        """
        self.words = '#'


    def addWord(self, word: str) -> None:
        """
        Adds a word into the data structure.
        """
        self.words += (word + '#')

    def search(self, word: str) -> bool:
        """
        Returns if the word is in the data structure. A word could contain the dot character '.' to represent any one letter.
        """
        return bool(search('#' + word + '#', self.words))
```

## è§£æ³• 2: å­—å…¸æ ‘ï¼ˆTrieï¼‰+ DFS

å¯¹äºè®°å½•/æŸ¥æ‰¾å•è¯çš„æƒ…æ™¯ï¼Œæœ‰ç§æ•°æ®ç»“æ„éå¸¸é«˜æ•ˆï¼šTrieã€‚æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€æ£µå­—å…¸æ ‘ï¼Œæ¯æ¬¡è°ƒç”¨ addWord æ—¶å€™ï¼Œå°†å•è¯å­˜å…¥å­—å…¸æ ‘ã€‚

æ³¨æ„ï¼šå½“è°ƒç”¨ search è¿›è¡ŒæŸ¥æ‰¾çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰å­—ç¬¦ä¸æ˜¯`.`ï¼Œé‚£ä¹ˆå°±æŒ‰ç…§å­—å…¸æ ‘çš„æŸ¥æ‰¾é€»è¾‘ï¼›å¦åˆ™ï¼Œç”±äºæ˜¯é€šé…ç¬¦ï¼Œè¦éå†å½“å‰çš„èŠ‚ç‚¹çš„ next ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œè¿™ä¸ªè¿‡ç¨‹å’Œ DFS ä¸€æ ·ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€: https://leetcode-cn.com/problems/add-and-search-word-data-structure-design/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-29-add-and-search-word/

var TrieNode = function() {
    this.next = {};
    this.isEnd = false;
};

/**
 * Initialize your data structure here.
 */
var WordDictionary = function() {
    this.root = new TrieNode();
};

/**
 * @param {string} word
 * @return {void}
 */
WordDictionary.prototype.addWord = function(word) {
    if (!word.length) return;

    let node = this.root;
    for (let i = 0; i < word.length; ++i) {
        if (!node.next[word[i]]) {
            node.next[word[i]] = new TrieNode();
        }
        node = node.next[word[i]];
    }
    node.isEnd = true;
};

/**
 * @param {string} word
 * @return {boolean}
 */
WordDictionary.prototype.search = function(word) {
    if (!word.length) return false;

    return this.dfs(this.root, word);
};

/**
 * @param {TrieNode} root
 * @param {string} word
 * @return {boolean}
 */
WordDictionary.prototype.dfs = function(root, word) {
    const length = word.length;
    let node = root;
    for (let i = 0; i < length; ++i) {
        const ch = word[i];
        // è‹¥æ˜¯é€šé…ç¬¦ï¼Œåˆ™å°è¯•éå†æ‰€æœ‰çš„æƒ…å†µ(DFS)
        if (ch === ".") {
            const keys = Reflect.ownKeys(node.next);
            for (const key of keys) {
                const found = this.dfs(node.next[key], word.slice(i + 1));
                if (found) return true;
            }
            return false;
        }

        if (!node.next[ch]) {
            return false;
        }
        node = node.next[ch];
    }
    return node.isEnd;
};
```

## æ›´å¤šèµ„æ–™

**è‹¥æœ‰çº°æ¼ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚è‹¥å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªã€Œå…³æ³¨+ç‚¹èµã€ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›** ğŸ‘‡

-   **ğŸ“–Blogï¼š[å‰‘æŒ‡ Offer + Leetcode é¢˜è§£](https://xxoo521.com/algorithm/)**
-   **ğŸ±Github ï¼š[https://github.com/dongyuanxin/blog](https://github.com/dongyuanxin/blog)**
-   **ğŸŒŸ å…¬ä¼—å·ï¼š[å¿ƒè°­åšå®¢](https://tva1.sinaimg.cn/large/006tNbRwly1g9xhhp50jpj31bi0hcju4.jpg)**
