### è§£æ³•ï¼šåŠ¨æ€è§„åˆ’

```java
public int maxProduct(int[] nums) {
        int res = nums[0];
        int min = nums[0], max = nums[0]; // è¡¨ç¤ºä»¥iè¿™ä¸ªå…ƒç´ ä¸ºç»“å°¾çš„å­ä¸²çš„æœ€å¤§/æœ€å°ç§¯
        for(int i = 1; i < nums.length; i++){
            if(nums[i] < 0){ // å½“ç¬¬iä¸ªå…ƒç´ ä¸ºè´Ÿæ•°æ—¶ï¼Œæˆªæ­¢ä¸Šä¸€ä½æœ€å¤§çš„ä¹˜ä¸Šnums[i]åè€Œå¯èƒ½æ˜¯æœ€å°çš„ï¼›æˆªæ­¢ä¸Šä¸€ä½æœ€å°çš„ä¹˜ä¸Šnums[i]åè€Œå¯èƒ½æ˜¯æœ€å¤§çš„ã€‚
                int temp = min; // æ‰€ä»¥å°†min maxçš„å€¼è¿›è¡Œäº¤æ¢ï¼Œè¿™æ ·æ‰èƒ½åœ¨åç»­ä½¿ç”¨ç»Ÿä¸€çš„ä»£ç ã€‚
                min = max;
                max = temp;
            }
            max = Math.max(max * nums[i], nums[i]);
            min = Math.min(min * nums[i], nums[i]);
            res = Math.max(res, max);
        }
        return res;
    }
```

æ€è·¯åˆ†æï¼š

* å­åºåˆ—çš„å’Œï¼Œå­åºåˆ—çš„ç§¯ï¼Œæœ€å¤§ä¸Šå‡å­åºåˆ—ç­‰ç­‰æ¶‰åŠå­åºåˆ—çš„æœ€å€¼ã€‚éƒ½å¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼ŒçŠ¶æ€æ–¹ç¨‹éƒ½å¯ä»¥å°è¯•è®¾ç½®ä¸ºä¸ä¸‹æ ‡`i`ä¸ºæœ€åä¸€ä¸ªå…ƒç´ çš„å­åºåˆ—çš„ç›¸åº”çš„å€¼ã€‚
    * å¯ä»¥çœ‹[53. æœ€å¤§å­åºå’Œ](https://github.com/ustcyyw/yyw_algorithm/blob/master/easy/DP/maxSubArray.md)çš„ç¬¬äºŒç§è§£æ³•æ€è·¯ã€‚
    * è¿™é¢˜ä¸53é¢˜ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼Œå¦‚æœæ˜¯æ±‚å’Œï¼ŒæŸä¸ªå…ƒç´ çš„æ­£è´Ÿå¹¶ä¸ä¼šå½±å“åŠ å’Œçš„å¤§å°ã€‚ä½†æ˜¯æ±‚ç§¯ï¼ŒæŸä¸ªå…ƒç´ ä¸ºè´Ÿåˆ™ä¼šä½¿å¾—ä¹˜ç§¯çš„å¤§å°å®Œå…¨è½¬å˜â€”â€”æœ€å¤§å€¼ä¹˜ä¸Šè´Ÿæ•°ä¹‹åå¯èƒ½å˜ä¸ºæœ€å°å€¼äº†ï¼Œæœ€å°å€¼ä¹˜ä¸Šè´Ÿæ•°ä¹‹åå¯èƒ½å˜ä¸ºæœ€å¤§å€¼äº†ã€‚
    * æ‰€ä»¥æœ¬é¢˜éœ€è¦å®šä¹‰ä¸¤ç§çŠ¶æ€ã€‚`min[i]`è¡¨ç¤ºä»¥`nums[i]`ç»“å°¾çš„æ‰€æœ‰è¿ç»­å­åºåˆ—çš„ç§¯çš„æœ€å°å€¼ã€‚`max[i]`è¡¨ç¤ºä»¥`nums[i]`ç»“å°¾çš„æ‰€æœ‰è¿ç»­å­åºåˆ—çš„ç§¯çš„æœ€å¤§å€¼ã€‚
* å¦‚æœæ•°ç»„ä¸­éƒ½æ˜¯æ­£æ•°ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±å¯ä»¥å†™ä¸º`max[i] = Math.max(Max[i] * nums[i], nums[i])`ã€‚ï¼ˆå› ä¸º`nums[i]`å¯èƒ½ä¸ºè´Ÿï¼‰ã€‚è¿™æ˜¯**è¿ç»­å­åºåˆ—**ï¼Œæ‰€ä»¥ä»¥ä¸Šä¸€ä¸ªå…ƒç´ ç»“å°¾çš„æœ€å¤§ä¹˜ç§¯ç§°`nums[i]`å°±æ˜¯å¯èƒ½çš„ä»¥`nums[i]`ä¸ºæœ€åä¸€ä¸ªå…ƒç´ çš„å­åºåˆ—çš„æœ€å¤§ç§¯ã€‚
* ä½†æ˜¯æ•°ç»„ä¸­æœ‰å¯èƒ½ä¸ºè´Ÿï¼Œé‡åˆ°æŸä¸ªè´Ÿæ•°æ—¶ï¼Œä¹˜ç§¯çš„å¤§å°å®Œå…¨è½¬å˜.
    * æ­£è´Ÿçš„è½¬å˜å°±æ˜¯è¯´ï¼Œå¦‚æœå½“å‰`nums[i]`æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆ`nums[i] * max[i]`å¾—åˆ°çš„æ˜¯æœ€å°å€¼ï¼›æˆ‘ä»¬éœ€è¦æ‹¿ä»¥`nums[i - 1]`ç»“å°¾çš„å­åºåˆ—çš„æœ€å°å€¼ä¸`nums[i]`è¿™ä¸ªè´Ÿæ•°ç›¸ä¹˜å¾—åˆ°æœ€å¤§å€¼ã€‚å¯è§æˆ‘ä»¬è¦ç»´æŒå¦å¤–ä¸€ä¸ªçŠ¶æ€`min[i]`ã€‚
    * å¦å¤–ä¸€ä¸ªçŠ¶æ€ã€‚çŠ¶æ€æ–¹ç¨‹ä¸º`min[i] = Math.min(min[i] * nums[i], nums[i])`ã€‚åŒæ ·è¿™æ ·å†™ä¹Ÿä¼šå‡ºç°æ­£è´Ÿå˜æ¢çš„é—®é¢˜ï¼Œå¦‚æœ`nums[i]`ä¸ºè´Ÿï¼Œå°±éœ€è¦æ‹¿`max[i]`æ¥ä¹˜å¾—åˆ°å¯èƒ½çš„æœ€å°å€¼ã€‚
    * ä¸ºäº†å®Œæˆè¿™ä¸ªæ­£è´Ÿå˜æ¢ï¼Œä¸”çŠ¶æ€æ–¹ç¨‹å†™å¾—ç»Ÿä¸€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡åˆ°`nums[i]`ä¸ºè´Ÿæ•°çš„æ—¶å€™ï¼Œå…ˆå°†`max[i-1]`ä¸`min[i - 1]`äº¤æ¢å€¼ã€‚
* è¾¹ç•Œæ¡ä»¶ä¸ºï¼šä»¥ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå­åºåˆ—çš„ç»“å°¾æ—¶ï¼Œ`max[0]=nums[0], min[0]=nums[0]`
* åœ¨éå†å½“ä¸­æ¯ä¸€æ¬¡éƒ½å°†resï¼Œè®¾ç½®ä¸º`max[i]`ä¸`res`çš„å¤§çš„é‚£ä¸ªã€‚
* è¿™é‡Œè¿˜å¯ä»¥è€ƒè™‘**çŠ¶æ€å‹ç¼©**ï¼Œå› ä¸ºæ¯æ¬¡è®¡ç®—`max[i]`ä¸`min[i]`ï¼Œéƒ½åªéœ€è¦`max[i - 1]`ä¸`min[i - 1]`å³å¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ç”¨ä¸¤ä¸ªå˜é‡`int min, max`å³å¯ã€‚
* æ—¶é—´å¤æ‚åº¦ä¸º$O(n)$ï¼›ç©ºé—´å¤æ‚åº¦ä¸º$O(1)$ã€‚

æ›´å¤šLeetCodeé¢˜è§£è¯·çœ‹æˆ‘çš„[github](https://github.com/ustcyyw/yyw_algorithm)ï¼Œåœ°å€https://github.com/ustcyyw/yyw_algorithmã€‚è¿˜æœ‰åˆ«çš„å°é¡¹ç›®ä¹Ÿå¾ˆå¥½ç©~å‘å¾®æ±‚ä¸ªå°æ˜Ÿæ˜ŸğŸ’–