
## è§£æ³• 1: åŠ¨æ€è§„åˆ’

å› ä¸ºä¸‘æ•°åªåŒ…å«è´¨å› æ•° 2, 3, 5ï¼Œæ‰€ä»¥å¯¹äºä¸‹ä¸ªä¸‘æ•°æ¥è¯´ï¼Œä¸€å®šæ˜¯å‰é¢æŸä¸ªä¸‘æ•°ä¹˜ 3ã€ä¹˜ 4 æˆ–è€…ä¹˜ 5 æ‰€å¾—ã€‚

å‡†å¤‡ä¸‰ä¸ªæŒ‡é’ˆ ptr2ã€ptr3ã€ptr5ï¼Œå®ƒä»¬æŒ‡å‘çš„æ•°åªèƒ½ä¹˜ 2ã€3 å’Œ 5ã€‚åœ¨å¾ªç¯è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡é€‰å– `2 * res[ptr2]`ã€`3 * res[ptr3]` å’Œ `5 * res[ptr5]`è¿™ä¸‰ä¸ªæ•°ä¸­ç»“æœæœ€å°çš„æ•°ï¼Œå¹¶ä¸”å°†å¯¹åº”çš„æŒ‡é’ˆå‘å‰ç§»åŠ¨ã€‚æœ‰æ•ˆå¾ªç¯æ˜¯ n æ¬¡ï¼Œå½“å¾ªç¯ç»“æŸåï¼Œres æ•°ç»„ä¸­å°±æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºä¿å­˜äº†ä¸‘æ•°ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/ugly-number-ii/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-03-10-ugly-number-ii/
/**
 * @param {number} n
 * @return {number}
 */
var nthUglyNumber = function(n) {
    const res = new Array(n);
    res[0] = 1;

    let ptr2 = 0, // ä¸‹ä¸ªæ•°å­—æ°¸è¿œ * 2
        ptr3 = 0, // ä¸‹ä¸ªæ•°å­—æ°¸è¿œ * 3
        ptr5 = 0; // ä¸‹ä¸ªæ•°å­—æ°¸è¿œ * 5

    for (let i = 1; i < n; ++i) {
        res[i] = Math.min(res[ptr2] * 2, res[ptr3] * 3, res[ptr5] * 5);
        // è¯´æ˜å‰ptr2ä¸ªä¸‘æ•°*2ä¹Ÿä¸å¯èƒ½äº§ç”Ÿæ¯”iæ›´å¤§çš„ä¸‘æ•°äº†
        // æ‰€ä»¥ç§»åŠ¨ptr2
        if (res[i] === res[ptr2] * 2) {
            ++ptr2;
        }
        if (res[i] === res[ptr3] * 3) {
            ++ptr3;
        }
        if (res[i] === res[ptr5] * 5) {
            ++ptr5;
        }
    }

    return res[n - 1];
};
```

æ—¶é—´å¤æ‚åº¦æ˜¯$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯$O(N)$ã€‚

## è§£æ³• 2: æœ€å°å †

å€ŸåŠ©æœ€å°å †ï¼Œå¯ä»¥åœ¨ $O(LogN)$ æ—¶é—´å¤æ‚åº¦å†…æ‰¾åˆ°å½“å‰æœ€å°çš„å…ƒç´ ã€‚æ•´ä½“ç®—æ³•æµç¨‹æ˜¯ï¼š

-   å‡†å¤‡æœ€å°å † heapã€‚å‡†å¤‡ mapï¼Œç”¨äºè®°å½•ä¸‘æ•°æ˜¯å¦å‡ºç°è¿‡ã€‚
-   å°† 1 æ”¾å…¥å †ä¸­
-   ä» 0 å¼€å§‹ï¼Œéå† n æ¬¡ï¼š
    -   å–å‡ºå †é¡¶å…ƒç´ ï¼Œæ”¾å…¥æ•°ç»„ res ä¸­
    -   ç”¨å †é¡¶å…ƒç´ ä¾æ­¤ä¹˜ä»¥ 2ã€3ã€5
    -   æ£€æŸ¥ç»“æœæ˜¯å¦å‡ºç°è¿‡ã€‚è‹¥æ²¡æœ‰å‡ºç°è¿‡ï¼Œé‚£ä¹ˆæ”¾å…¥å †ä¸­ï¼Œæ›´æ–° map
-   è¿”å› res æœ€åä¸€ä¸ªæ•°å­—

ä»£ç å®ç°å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/ugly-number-ii/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-03-10-ugly-number-ii/

const defaultCmp = (x, y) => x > y;
const swap = (arr, i, j) => ([arr[i], arr[j]] = [arr[j], arr[i]]);
class Heap {
    /**
     * é»˜è®¤æ˜¯æœ€å¤§å †
     * @param {Function} cmp
     */
    constructor(cmp = defaultCmp) {
        this.container = [];
        this.cmp = cmp;
    }

    insert(data) {
        const { container, cmp } = this;

        container.push(data);
        let index = container.length - 1;
        while (index) {
            let parent = Math.floor((index - 1) / 2);
            if (!cmp(container[index], container[parent])) {
                return;
            }
            swap(container, index, parent);
            index = parent;
        }
    }

    extract() {
        const { container, cmp } = this;
        if (!container.length) {
            return null;
        }

        swap(container, 0, container.length - 1);
        const res = container.pop();
        const length = container.length;
        let index = 0,
            exchange = index * 2 + 1;

        while (exchange < length) {
            // å¦‚æœæœ‰å³èŠ‚ç‚¹ï¼Œå¹¶ä¸”å³èŠ‚ç‚¹çš„å€¼å¤§äºå·¦èŠ‚ç‚¹çš„å€¼
            let right = index * 2 + 2;
            if (right < length && cmp(container[right], container[exchange])) {
                exchange = right;
            }
            if (!cmp(container[exchange], container[index])) {
                break;
            }
            swap(container, exchange, index);
            index = exchange;
            exchange = index * 2 + 1;
        }

        return res;
    }

    top() {
        if (this.container.length) return this.container[0];
        return null;
    }
}

/**
 * @param {number} n
 * @return {number}
 */
var nthUglyNumber = function(n) {
    const heap = new Heap((x, y) => x < y);
    const res = new Array(n);
    const map = {};
    const primes = [2, 3, 5];

    heap.insert(1);
    map[1] = true;
    for (let i = 0; i < n; ++i) {
        res[i] = heap.extract();

        for (const prime of primes) {
            let tmp = res[i] * prime;
            if (!map[tmp]) {
                heap.insert(tmp);
                map[tmp] = true;
            }
        }
    }
    return res[n - 1];
};
```

æ—¶é—´å¤æ‚åº¦æ˜¯$O(NlogN)$, ç©ºé—´å¤æ‚åº¦æ˜¯$O(N)$ã€‚

## æ›´å¤šèµ„æ–™

**æ•´ç†ä¸æ˜“ï¼Œè‹¥å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªã€Œå…³æ³¨+ç‚¹èµã€ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›** ğŸ‘‡

-   **ğŸ“–Blogï¼š[å‰‘æŒ‡ Offer é¢˜è§£ + JS ä»£ç ](https://xxoo521.com/algorithm/)**
-   **ğŸ±Github ï¼š[https://github.com/dongyuanxin/blog](https://github.com/dongyuanxin/blog)**
-   **ğŸŒŸ å…¬ä¼—å·ï¼š[å¿ƒè°­åšå®¢](https://tva1.sinaimg.cn/large/006tNbRwly1g9xhhp50jpj31bi0hcju4.jpg)**
