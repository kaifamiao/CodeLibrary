
## é¢˜ç›®åˆ†æ

è™½ç„¶è¿™é¢˜åœ¨ leetcode ä¸Šæ ‡æ³¨çš„ã€Œç®€å•ã€ï¼Œä½†æ˜¯æœ¬é¢˜è¿˜æ˜¯å¾ˆæœ‰ç ”ç©¶æ„ä¹‰çš„ã€‚æœ¬æ–‡ä»‹ç»äº† 3 ç§è§£æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¾æ¬¡é™ä½ï¼Œéƒ½æ˜¯åŸºäºç»å…¸çš„ç®—æ³•æˆ–è€…æ•°æ®ç»“æ„ã€‚

## è§£æ³• 1: ç›´æ¥æ’åº

å…ˆè¯´æœ€ç®€å•ã€æœ€ç›´è§‚çš„åšæ³•ï¼šç›´æ¥æ’åºã€‚å°†æ•°ç»„æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åºï¼Œå¹¶ä¸”è¿”å›å‰ k ä¸ªæ•°å­—ã€‚ä»£ç å®ç°å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-21-least-nums/

/**
 * @param {number[]} arr
 * @param {number} k
 * @return {number[]}
 */
var getLeastNumbers = function(arr, k) {
    return arr.sort((a, b) => a - b).slice(0, k);
};
```

ä½¿ç”¨é«˜çº§æ’åºï¼ˆä»£ç ç”¨çš„æ˜¯å¿«æ’ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯$O(NlogN)$ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯$O(logN)$ã€‚

## è§£æ³• 2: æœ€å¤§å †

å †æ˜¯ä¸€ç§éå¸¸å¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚æœ€å¤§å †çš„æ€§è´¨æ˜¯ï¼šèŠ‚ç‚¹å€¼å¤§äºå­èŠ‚ç‚¹çš„å€¼ï¼Œå †é¡¶å…ƒç´ æ˜¯æœ€å¤§å…ƒç´ ã€‚åˆ©ç”¨è¿™ä¸ªæ€§è´¨ï¼Œæ•´ä½“çš„ç®—æ³•æµç¨‹å¦‚ä¸‹ï¼š

-   åˆ›å»ºå¤§å°ä¸º k çš„æœ€å¤§å †
-   å°†æ•°ç»„çš„å‰ k ä¸ªå…ƒç´ æ”¾å…¥å †ä¸­
-   ä»ä¸‹æ ‡ k ç»§ç»­å¼€å§‹ä¾æ¬¡éå†æ•°ç»„çš„å‰©ä½™å…ƒç´ ï¼š
    -   å¦‚æœå…ƒç´ å°äºå †é¡¶å…ƒç´ ï¼Œé‚£ä¹ˆå–å‡ºå †é¡¶å…ƒç´ ï¼Œå°†å½“å‰å…ƒç´ å…¥å †
    -   å¦‚æœå…ƒç´ å¤§äº/ç­‰äºå †é¡¶å…ƒç´ ï¼Œä¸åšæ“ä½œ

ç”±äºå †çš„å¤§å°æ˜¯ Kï¼Œç©ºé—´å¤æ‚åº¦æ˜¯$O(K)$ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯$O(NlogK)$ã€‚

ç”±äº JavaScript ä¸­æ²¡æœ‰å †ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å®ç°ã€‚ä»£ç å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-21-least-nums/
function swap(arr, i, j) {
    [arr[i], arr[j]] = [arr[j], arr[i]];
}

class MaxHeap {
    constructor(arr = []) {
        this.container = [];
        if (Array.isArray(arr)) {
            arr.forEach(this.insert.bind(this));
        }
    }

    insert(data) {
        const { container } = this;

        container.push(data);
        let index = container.length - 1;
        while (index) {
            let parent = Math.floor((index - 1) / 2);
            if (container[index] <= container[parent]) {
                break;
            }
            swap(container, index, parent);
            index = parent;
        }
    }

    extract() {
        const { container } = this;
        if (!container.length) {
            return null;
        }

        swap(container, 0, container.length - 1);
        const res = container.pop();
        const length = container.length;
        let index = 0,
            exchange = index * 2 + 1;

        while (exchange < length) {
            // å¦‚æœæœ‰å³èŠ‚ç‚¹ï¼Œå¹¶ä¸”å³èŠ‚ç‚¹çš„å€¼å¤§äºå·¦èŠ‚ç‚¹çš„å€¼
            let right = index * 2 + 2;
            if (right < length && container[right] > container[exchange]) {
                exchange = right;
            }
            if (container[exchange] <= container[index]) {
                break;
            }
            swap(container, exchange, index);
            index = exchange;
            exchange = index * 2 + 1;
        }

        return res;
    }

    top() {
        if (this.container.length) return this.container[0];
        return null;
    }
}

/**
 * @param {number[]} arr
 * @param {number} k
 * @return {number[]}
 */
var getLeastNumbers = function(arr, k) {
    const length = arr.length;
    if (k >= length) {
        return arr;
    }

    const heap = new MaxHeap(arr.slice(0, k));
    for (let i = k; i < length; ++i) {
        if (heap.top() > arr[i]) {
            heap.extract();
            heap.insert(arr[i]);
        }
    }
    return heap.container;
};
```

## è§£æ³• 3: åŸºäºå¿«é€Ÿæ’åºçš„ partition

è§£æ³• 1 ä¸­ä½¿ç”¨äº†å¿«é€Ÿæ’åºï¼Œä½†å…¶å®å¹¶éœ€è¦å¯¹å…¨éƒ¨å…ƒç´ è¿›è¡Œæ’åºï¼Œé¢˜ç›®åªéœ€è¦å‰ k ä¸ªå…ƒç´ ã€‚

å›é¡¾å¿«é€Ÿæ’åºä¸­çš„ partition æ“ä½œï¼Œå¯ä»¥å°†å…ƒç´ `arr[0]`æ”¾å…¥æ’åºåçš„æ­£ç¡®ä½ç½®ï¼Œå¹¶ä¸”è¿”å›è¿™ä¸ªä½ç½®`index`ã€‚åˆ©ç”¨ partition çš„ç‰¹ç‚¹ï¼Œç®—æ³•æµç¨‹å¦‚ä¸‹ï¼š

-   å¦‚æœ`index = k`ï¼Œè¯´æ˜ç¬¬ k ä¸ªå…ƒç´ å·²ç»æ”¾å…¥æ­£ç¡®ä½ç½®ï¼Œè¿”å›å‰ k ä¸ªå…ƒç´ 
-   å¦‚æœ`k < index`ï¼Œå‰ k ä¸ªå…ƒç´ åœ¨`[left, index - 1]`ä¹‹é—´ï¼Œç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼Œç»§ç»­æŸ¥æ‰¾
-   å¦‚æœ`index < k`ï¼Œå‰ k ä¸ªå…ƒç´ åœ¨`[index + 1, right]` ä¹‹é—´ï¼Œç¼©å°æŸ¥æ‰¾èŒƒå›´ï¼Œç»§ç»­æŸ¥æ‰¾

ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå¯ä»¥ä½¿ç”¨`2, 8, 1, 1, 0, 11, -1, 0`è¿™ä¸ªä¾‹å­åœ¨çº¸ä¸Šç”»ä¸€ä¸‹è¿‡ç¨‹ã€‚

ä»£ç å®ç°å¦‚ä¸‹ï¼š

```javascript
// acåœ°å€ï¼šhttps://leetcode-cn.com/problems/zui-xiao-de-kge-shu-lcof/
// åŸæ–‡åœ°å€ï¼šhttps://xxoo521.com/2020-02-21-least-nums/

/**
 *
 * @param {number[]} arr
 * @param {number} start
 * @param {number} end
 * @return {number}
 */
function partition(arr, start, end) {
    const k = arr[start];
    let left = start + 1,
        right = end;
    while (1) {
        while (left <= end && arr[left] <= k) ++left;
        while (right >= start + 1 && arr[right] >= k) --right;

        if (left >= right) {
            break;
        }

        [arr[left], arr[right]] = [arr[right], arr[left]];
        ++left;
        --right;
    }
    [arr[right], arr[start]] = [arr[start], arr[right]];
    return right;
}

/**
 * @param {number[]} arr
 * @param {number} k
 * @return {number[]}
 */
var getLeastNumbers = function(arr, k) {
    const length = arr.length;
    if (k >= length) return arr;
    let left = 0,
        right = length - 1;
    let index = partition(arr, left, right);
    while (index !== k) {
        if (index < k) {
            left = index + 1;
            index = partition(arr, left, right);
        } else if (index > k) {
            right = index - 1;
            index = partition(arr, left, right);
        }
    }

    return arr.slice(0, k);
};
```

æ—¶é—´å¤æ‚åº¦æ˜¯$O(N)$ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯$O(N)$ã€‚

## æ€»ç»“

ä¸å¾—ä¸è¯´ Leetcode å¹³å°è¿˜æ˜¯å¾ˆå‡†ç¡®çš„ã€‚ä¸‹é¢ç¬¬ä¸€å¼ æ˜¯è§£æ³• 3 çš„è¿è¡Œç»“æœï¼Œç¬¬äºŒå¼ æ˜¯è§£æ³• 2 çš„è¿è¡Œç»“æœï¼Œè§£æ³• 3 çš„æ—¶é—´æ•ˆç‡æ›´é«˜ã€‚

![](https://pic.leetcode-cn.com/0cfb470c8a4c78bc9ec48344c7d81d5e5776f313630cdf7f796329a73f37af35.jpg)

![](https://pic.leetcode-cn.com/e1a8a0bd5f5061d2707a9b73e76dd7e5a6982de24a5fa3e7ea8f1b9eda47bd1a.jpg)

è§£æ³• 2 ä¸­å®ç°çš„å †ä¸æ˜¯æœ€ä¼˜çš„æ–¹æ³•ï¼Œæœ‰ 2 ç‚¹å¯ä»¥ä¼˜åŒ–ï¼š

-   swap äº¤æ¢æ¢æˆå…ƒç´ èµ‹å€¼ã€‚
-   æ ¹ç»æ•°ç»„åˆ›å»ºå †çš„æ—¶å€™ï¼Œå¯ä»¥ä»ç¬¬ä¸€ä¸ªéå¶èŠ‚ç‚¹å‘ä¸Šæ‰§è¡Œ shift_up æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯`heapify`ã€‚

ä¸è¿‡æœ¬é¢˜è€ƒå¯Ÿé‡ç‚¹ä¸åœ¨è¿™ï¼Œæ‰€ä»¥å°±éšæ‰‹å†™äº†ä¸‹å †çš„ä»£ç ï¼ˆä¸»è¦æ˜¯çœ‹çš„æ˜ç™½ï¼‰ã€‚æœ‰å…´è¶£å¯ä»¥çœ‹ä¸€ä¸‹ C++æ ‡å‡†åº“çš„å®ç°ã€‚

## æ›´å¤šèµ„æ–™

**æ•´ç†ä¸æ˜“ï¼Œè‹¥å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªã€Œå…³æ³¨+ç‚¹èµã€ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘æ›´æ–°çš„åŠ¨åŠ›** ğŸ‘‡

-   **ğŸ“–Blogï¼š[å‰‘æŒ‡ Offer é¢˜è§£ + JS ä»£ç ](https://xxoo521.com/algorithm/)**
-   **ğŸ±Github ï¼š[https://github.com/dongyuanxin/blog](https://github.com/dongyuanxin/blog)**
-   **ğŸŒŸ å…¬ä¼—å·ï¼š[å¿ƒè°­åšå®¢](https://tva1.sinaimg.cn/large/006tNbRwly1g9xhhp50jpj31bi0hcju4.jpg)**
