### è§£æ³•ï¼šBFS

```java
private int[][] direction = {{-1, 0}, {1, 0}, {0, -1}, {0, 1}};
    private int n;
    private Queue<int[]> pos;
    private int res;
    public int maxDistance(int[][] grid) {
        n = grid.length;
        pos = new LinkedList<>();
        for(int i = 0; i < n; i++){
            for (int j = 0; j < n; j++)
                if(grid[i][j] == 1)
                    pos.add(new int[]{i, j});
        }
        res = 0;
        while (!pos.isEmpty()){
            int[] temp = pos.remove();
            walk(temp[0], temp[1], grid);
        }
        return res == 0 ? -1 : res - 1;
    }

    private void walk(int x, int y, int[][] grid){
        for(int i = 0; i < 4; i++){
            int newX = x + direction[i][0];
            int newY = y + direction[i][1];
            if(inArea(newX, newY) && grid[newX][newY] == 0){
                pos.add(new int[]{newX, newY});
                grid[newX][newY] = grid[x][y] + 1;
                res = Math.max(res, grid[newX][newY]);
            }
        }
    }

    private boolean inArea(int x, int y) {
        return x >= 0 && x < n && y >= 0 && y < n;
    }
```

æ€è·¯åˆ†æžï¼š

* è¿™ä¸ªé¢˜ä»”ç»†è¯»æ‡‚é¢˜ç›®ä¹‹åŽå‘çŽ°ï¼Œä»–å…¶å®žå’Œ[994. è…çƒ‚çš„æ©˜å­](https://github.com/ustcyyw/yyw_algorithm/blob/master/easy/other/orangesRotting.md)ã€‚æ˜¯åŸºæœ¬ä¸Šå®Œå…¨ä¸€æ¨¡ä¸€æ ·çš„ï¼Œç”¨BFSå°±å¯ä»¥è§£å†³ã€‚
* é¦–å…ˆæ¥è¯»æ‡‚é¢˜ç›®ã€‚ä¸ºä»€ä¹ˆæ±‚æœ€è¿œè·ç¦»ï¼Œåè€Œæ˜¯ç”¨BFSï¼Ÿå¾ˆç®€å•ï¼Œè¿™ä¸ªåœ°å›¾ä¸Šæœ‰å¤šä¸ªé™†åœ°ï¼Œå¦‚æžœä»Žä¸€ä¸ªé™†åœ°å‡ºå‘ä½¿ç”¨DFSï¼Œè¿™æ ·æ‰¾åˆ°çš„æœ€è¿œæµ·æ´‹ï¼Œç¦»åˆ«çš„é™†åœ°å¯èƒ½å°±æ˜¯æœ€è¿œçš„ã€‚
* å…¶å®žçœ‹å®Œç¤ºä¾‹å¯ä»¥å‘çŽ°ï¼Œæ‰€æ±‚çš„æ›¼å“ˆé¡¿è·ç¦»å°±æ˜¯é™†åœ°åˆ°è¯¥ä½ç½®éœ€è¦èµ°çš„æ­¥æ•°ï¼ˆä¸Šä¸‹å·¦å³è¡Œèµ°ï¼Œä¸€æ¬¡åªèƒ½å°†æ¨ªçºµåæ ‡ä¹‹ä¸€æ”¹å˜ã€‚ï¼‰è¦æ‰¾åˆ°æœ€è¿œçš„æµ·æ´‹ï¼Œå¯¹äºŽå„ä¸ªé™†åœ°éƒ½æ˜¯æœ€è¿œï¼Œå°±éœ€è¦ä»Žæ¯ä¸ªé™†åœ°ä¸ºèµ·ç‚¹å‘å¤–èµ°ã€‚ç¬¬ä¸€æ¬¡ï¼Œä»¥é™†åœ°ä¸ºèµ·ç‚¹ï¼Œèµ°ä¸€æ­¥ï¼›ç¬¬äºŒæ¬¡ï¼Œæ¯ä¸ªç¬¬ä¸€æ¬¡è®¿é—®çš„ç‚¹ä¸ºèµ·ç‚¹ï¼Œèµ°ä¸€æ­¥â€¦â€¦ç›´åˆ°åœ°å›¾ä¸Šçš„æ‰€æœ‰ç‚¹éƒ½è¢«è®¿é—®è¿‡ã€‚
* å°±åƒå›žæº¯ç®—æ³•é¢˜è§£ä¸­å¾ˆå¸¸è§çš„äºŒç»´å¹³é¢çš„æœç´¢ã€‚å®žä¾‹å˜é‡`int[][] direction`è¡¨ç¤ºä¸Šä¸‹å·¦å³ç§»åŠ¨çš„åæ ‡å˜åŒ–é‡ï¼Œå¹¶ä¸”ç”¨`private int n;`è¡¨ç¤ºè¡Œåˆ—æ•°ã€‚ä¸”å†™ä¸€ä¸ªé˜²æ­¢æ•°ç»„ç´¢å¼•è¶Šç•Œçš„åˆ¤æ–­å‡½æ•°` private boolean isIn(int x, int y)`ã€‚
* æŽ¥ä¸‹æ¥ï¼Œå®Œæˆæˆ‘ä»¬BFSå‡½æ•°çš„è®¾è®¡ã€‚
    * ç”¨`res`è¡¨ç¤ºæœç´¢ä¸­çš„æœ€è¿œæ›¼å“ˆé¡¿è·ç¦»ã€‚
    * éœ€è¦ä¸€ä¸ªä¿ç•™ç»“ç‚¹çš„é˜Ÿåˆ—`private Queue pos;`
    * èµ·ç‚¹æ˜¯æ¯ä¸€ä¸ªé™†åœ°ï¼Œåˆå§‹æ—¶å€™å°†æ‰€æœ‰é™†åœ°åæ ‡`grid[i][j] == 1`çš„åæ ‡æ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚
    * å¯¹äºŽæŸä¸ªç‚¹çš„æœç´¢ï¼Œä½¿ç”¨å‡½æ•°`walk(int x, int y, int[][] grid)`ï¼Œå‰ä¸¤ä¸ªå‚æ•°è¡¨ç¤ºè¯¥ç‚¹çš„åæ ‡ï¼Œå°†è¯¥ç‚¹ä¸Šä¸‹å·¦å³å››ä¸ªç‚¹çš„åæ ‡ç®—å‡ºï¼Œä¿è¯ä¸è¶Šç•Œçš„æƒ…å†µä¸‹`isIn(newX, newY)`ä¸ºçœŸï¼Œå¦‚æžœç›¸é‚»å››ç‚¹æ˜¯è¿˜æ²¡æœ‰è®¿é—®è¿‡çš„æ°´åŸŸ`grid[newX][newY] == 0`ã€‚å°†è¯¥å¤„çš„å€¼è®¾ç½®ä¸ºä¸Šä¸€ä¸ªç‚¹è·ç¦»èµ·ç‚¹é™†åœ°çš„è·ç¦»+1`grid[newX][newY] = grid[x][y] + 1;`ï¼Œå¹¶ä¸”æ›´æ–°`res`ã€‚ç„¶åŽå°†è¯¥ç‚¹çš„åæ ‡æ”¾å…¥é˜Ÿåˆ—ï¼Œå‡†å¤‡ç”¨å®ƒä¸ºèµ·ç‚¹è®¿é—®ä¸´è¿‘çš„æ°´åŸŸï¼ˆç”¨å®ƒæŽ¥ç€è¿›è¡Œå¹¿åº¦ä¼˜å…ˆéåŽ†ï¼‰
    * è·ç¦»å‡ºå‘é™†åœ°çš„æ›¼å“ˆé¡¿è·ç¦»ç›´æŽ¥ä½¿ç”¨`grid[][]`æ¥è®°å½•ï¼Œè§„å®š`grid[i][j] = x `è¡¨ç¤ºè·ç¦»å‡ºå‘çš„é™†åœ°çš„æ›¼å“ˆé¡¿è·ç¦»ä¸ºx-1ã€‚
    * é˜Ÿåˆ—éžç©ºæ—¶å–å‡ºä¸€ä¸ªèµ·ç‚¹ï¼Œå‘ä¸Šä¸‹å·¦å³å°è¯•è¿›è¡Œè®¿é—®ï¼Œé€šè¿‡`walk`å‡½æ•°åªä¼šè®¿é—®ç›¸é‚»çš„æ°´åŸŸã€‚
* æœç´¢å®ŒæˆåŽï¼Œæ ¹æ®`grid[i][j]`çš„æ„ä¹‰è®¾å®šï¼Œresçš„å€¼ä¸ºæœ€è¿œæ›¼å“ˆé¡¿è·ç¦»+1ï¼Œæ‰€ä»¥ç»“æžœåº”è¯¥ä¸º` res - 1`ã€‚
* æœ€åŽï¼Œè¦æ³¨æ„ç‰¹æ®Šæƒ…å†µçš„å¤„ç†ï¼šåœ°å›¾ä¸Šåªæœ‰é™†åœ°æˆ–è€…æµ·æ´‹ï¼Œè¯·è¿”å›ž -1ã€‚åªæœ‰æµ·æ´‹çš„æƒ…å†µï¼Œæ„å‘³ç€åˆå§‹åŒ–ç»“æŸåŽé˜Ÿåˆ—ä¸ºç©ºï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•æœç´¢ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µ`res = 0`ã€‚åªæœ‰é™†åœ°çš„æƒ…å†µï¼Œæ„å‘³ç€ä»»ä½•ä¸€ä¸ªèµ·ç‚¹åœ¨è°ƒç”¨å‡½æ•°`walk`åŽéƒ½æ‰¾ä¸åˆ°å¯è®¿é—®çš„ç‚¹ï¼Œresä¸ä¼šè¿›è¡Œä»»ä½•æ›´æ–°ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µ`res=0`ã€‚åœ¨è¿”å›žçš„æ—¶å€™åˆ¤æ–­å¦‚æžœ`res ==0`ï¼Œå°±è¿”å›ž-1ã€‚

è¿è¡Œç»“æžœï¼š

* æ‰§è¡Œç”¨æ—¶ :19 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†75.92%çš„ç”¨æˆ·
* å†…å­˜æ¶ˆè€— :41.6 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†99.07%çš„ç”¨æˆ·

æ›´å¤šLeetCodeé¢˜è§£è¯·çœ‹æˆ‘çš„[github](https://github.com/ustcyyw/yyw_algorithm)ï¼Œåœ°å€https://github.com/ustcyyw/yyw_algorithmã€‚è¿˜æœ‰åˆ«çš„å°é¡¹ç›®ä¹Ÿå¾ˆå¥½çŽ©~å‘å¾®æ±‚ä¸ªå°æ˜Ÿæ˜ŸðŸ’–