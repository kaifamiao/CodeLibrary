è¿™é“é¢˜ä¸€çœ‹å°±æ˜¯BFSé—®é¢˜ï¼Œé—®é¢˜åœ¨äºæ€ä¹ˆä½¿ç”¨BFSã€‚æœ¬èœé¸¡ä¸€å¼€å§‹è¯¯å…¥æ­§é€”ï¼Œåé¢æ”¹é‚ªå½’æ­£ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰åŒé“ä¸­äººã€‚

å¦å¤–æœ¬èœé¸¡åœ¨ä¸€ç›´åˆ·é¢˜ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„å…¬ä¼—å·[çƒ­çˆ±ç”Ÿæ´»çš„å°ç†ŠçŒ«]å“¦~


## 1 ç¬¨æ–¹æ³•

[è¿™ä¸ªæ˜¯æˆ‘è‡ªå·±æƒ³çš„ç¬¨æ–¹æ³•ï¼Œ å¯ä»¥ç›´æ¥çœ‹ä¸‹é¢çš„è§£æ³•2ğŸ˜‚]

ä¸€å¼€å§‹æˆ‘æƒ³ç›´æ¥ä»æ¯ä¸ªæµ·åŸŸçš„ä½ç½®å‡ºå‘åšbfsï¼Œæ‰¾åˆ°æ¯ä¸ªæµ·åŸŸåˆ°æœ€è¿‘çš„é™†åœ°çš„æœ€è¿‘è·ç¦»åï¼Œå†é€‰æ‹©è¿™äº›è·ç¦»é‡Œé¢çš„æœ€è¿œçš„è·ç¦»å³å¯ï¼ˆå°±æ˜¯ä¸€ä¸ªæœ€æš´åŠ›çš„è§£æ³•ï¼‰ï¼Œä½†ä¼šè¶…æ—¶æˆ–çˆ†å†…å­˜ã€‚

æ— æ³•é€šè¿‡çš„bfsä»£ç ï¼š

```c++
class Solution {
public:
    struct Position{
        int row, col, depth;
        Position() {}
        Position(int r, int c, int d) : row(r), col(c), depth(d) {}
    };
    int bfs(vector<vector<int>>& grid, int row, int col) {
        int n = grid.size();
        int dirs[4][2] = {{0, 1}, {0, -1}, {1, 0}, {-1, 0}};

        vector<vector<int>> visited(n, vector<int>(n, 0));
        visited[row][col] = 1;
        queue<Position> que;
        que.push(Position(row, col, 0));
        while (!que.empty()) {
            Position cur = que.front();
            que.pop();
            for (int i = 0; i < 4; i++) {
                int r_ = cur.row + dirs[i][0];
                int c_ = cur.col + dirs[i][1];
                if (r_ >= 0 && r_ < n && c_ >= 0 && c_ < n && visited[r_][c_] == 0) {
                    if (grid[r_][c_] == 1) {
                        return cur.depth + 1;
                    }
                    visited[r_][c_] = 1;
                    que.push(Position(r_, c_, cur.depth + 1));
                }
            }
        }
        return -1;
    }

    int maxDistance(vector<vector<int>>& grid) {
        int n = grid.size();
        int seas = 0;
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (grid[i][j] == 0) seas++;
            }
        }
        if (seas == 0 || seas == n * n) return -1;

        int ret = -1;
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (grid[i][j] == 0) {
                    ret = max(ret, bfs(grid, i, j));
                }
            }
        }
        return ret;
    }
};
```



## 2 å¥½æ–¹æ³•

ä¸Šé¢çš„æš´åŠ›è§£æ³•æ— æ³•ACï¼Œå› ä¸ºå®ƒå¤ªå¤æ‚äº†ï¼Œæœ€åçš„æƒ…å†µä¸‹æ¯æ¬¡å¯»æ‰¾å°å²›éƒ½è¦é©¶è¿‡å¤§åŠé”…æµ·æ´‹ï¼Œå› æ­¤éœ€è¦å¯»æ‰¾ä¸€ä¸ªæ›´å¥½çš„è§£æ³•ã€‚åœ¨ç»è¿‡ä¸€ç•ªå†¥æ€è‹¦æƒ³ä¹‹åï¼Œæˆ‘ä»å¤§ä½¬ä»¬é‚£é‡Œå­¦åˆ°äº†æ–°çš„æ€è·¯[1]ã€‚æˆ‘ä¹Ÿä¸çŸ¥é“è‡ªå·±æ˜¯æ€ä¹ˆæƒ³åˆ°å‰é¢çš„è¾£é¸¡è§£æ³•çš„ï¼Œæ­£å¸¸çš„æ€è·¯ä¸åº”è¯¥æ˜¯ä»æ¯ä¸ªå°å²›å‡ºå‘å—ï¼Ÿéå†çš„æµç¨‹å°±åº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæœ€ååˆ°è¾¾çš„æµ·åŸŸçš„è·ç¦»å³ä¸ºæ‰€æ±‚ï¼š

![1162-1.png](https://pic.leetcode-cn.com/a4ab89da9c742080b792d19e1b30fc0aeb569313fbc50843c0a43e9bb6c581c8-1162-1.png)


å› æ­¤åªéœ€è¦åœ¨ä¸€å¼€å§‹çš„æ—¶å€™å°†æ‰€æœ‰å°å²›éƒ½åŠ å…¥é˜Ÿåˆ—ä¸­ï¼Œè¿›è¡ŒBFSéå†ï¼Œé˜Ÿåˆ—ä¸­æœ€åçš„é‚£ä¸ªä½ç½®çš„è·ç¦»å³ä¸ºæ‰€æ±‚ã€‚

å¼±é¸¡çš„å¯ä»¥é€šè¿‡çš„ä»£ç ï¼š

```cpp
class Solution {
public:
    int maxDistance(vector<vector<int>>& grid) {
        int n = grid.size();
        int dirs[4][2] = {{0, 1}, {0, -1}, {1, 0}, {-1, 0}};
        queue<pair<int, int>> que;
        
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                if (grid[i][j] == 1) {
                    que.push(make_pair(i, j));
                }
            }
        }
        if (que.empty() || que.size() == n * n) return -1;

        pair<int, int> cur;
        while (!que.empty()) {
            cur = que.front();
            que.pop();
            for (int i = 0; i < 4; i++) {
                int r_ = cur.first + dirs[i][0];
                int c_ = cur.second + dirs[i][1];
                if (r_ >= 0 && r_ < n && c_ >= 0 && c_ < n && grid[r_][c_] == 0) {
                    grid[r_][c_] = grid[cur.first][cur.second] + 1;
                    que.push(make_pair(r_, c_));
                }
            }
        }
        return grid[cur.first][cur.second] - 1;
    }
};
```

![image.png](https://pic.leetcode-cn.com/bb7f04463c2fc097c2092360c10ec5cd6d409a5c8252e8c1c0902f0a4817cc5f-image.png)