# 69 - 2çš„å¹‚

## é¢˜ç›®

ç»™å®šä¸€ä¸ªæ•´æ•°ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­å®ƒæ˜¯å¦æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ã€‚

ç¤ºä¾‹ 1:

> è¾“å…¥: 1
> è¾“å‡º: true
> è§£é‡Š: $2^0$ = 1

ç¤ºä¾‹ 2:

> è¾“å…¥: 16
> è¾“å‡º: true
> è§£é‡Š: $2^4$= 16

ç¤ºä¾‹ 3:

> è¾“å…¥: 218
> è¾“å‡º: false

## è§£ç­”

çœ‹åˆ°é¢˜ç›®ï¼Œç¬¬ä¸€ååº”å°±æ˜¯åœ¨è€ƒæ•°å­¦ğŸ˜‚ğŸ˜‚ï¼Œè‚¯å®šæœ‰ä»€ä¹ˆéªšæ“ä½œçš„é¢˜è§£

### log2

> https://leetcode.com/problems/power-of-two/discuss/283725/JavaScript-Solutiuon

$n = 2^x$ä¹Ÿå°±æ˜¯è¯´$x = log_2(n)$ï¼Œåªè¦è¿™ä¸ªxæ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªnå°±æ˜¯2çš„å¹‚

```js
var isPowerOfTwo = function (n) {
  return Math.log2(n) % 1 === 0
};
```

> Runtime: 80 ms, faster than 29.44% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.5 MB, less than 69.23% of JavaScript online submissions for Power of Two.

`%1`çš„æ„æ€æ˜¯åˆ¤æ–­æœ‰æ²¡æœ‰å°æ•°ç‚¹ã€‚å¦‚æœæ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆå°±æ˜¯0

```go
func isPowerOfTwo(n int) bool {
	if n <= 0 {
		return false
	}
	log := math.Log2(float64(n))
	return !strings.Contains(strconv.FormatFloat(log, 'f', -1, 64), ".")
}
```

> Runtime: 0 ms, faster than 100.00% of Go online submissions for Power of Two.
>
> Memory Usage: 2.3 MB, less than 25.00% of Go online submissions forPower of Two.

goé‡Œé¢çš„å–ä½™ï¼Œéœ€è¦ä¸¤è¾¹éƒ½æ˜¯intï¼Œç„¶è€Œæ—¢ç„¶éƒ½æ˜¯æ•´æ•°äº†ï¼Œé‚£ä¹ˆ`%1`ä¹Ÿå°±å¤±å»ä½œç”¨äº†ã€‚

é‚£ä¹ˆæ€ä¹ˆåˆ¤æ–­logå‡ºæ¥çš„float64æœ‰æ²¡æœ‰å°æ•°ç‚¹å‘¢ï¼Ÿæˆ‘çš„åšæ³•æ˜¯è®©å®ƒå˜æˆå­—ç¬¦ä¸²ï¼Œç„¶åæ‰¾ä¸€ä¸‹é‡Œé¢æœ‰æ²¡æœ‰`.`

[float64è½¬å­—ç¬¦ä¸²](https://studygolang.com/articles/5003)å¾ˆéº»çƒ¦çš„æ„Ÿè§‰ã€‚ã€‚ä¸€å¤§å †å‚æ•°

- fï¼Œè¡¨æ˜æ²¡æœ‰æŒ‡æ•°ã€‚è¿™æ˜¯é»˜è®¤çš„ç¼ºçœå€¼ã€‚
- -1ï¼Œç²¾åº¦-1å°±å…¨éƒ¨å˜æˆå­—ç¬¦ä¸²ã€‚å¦‚æœè§„å®šç²¾åº¦ï¼Œé‚£ä¹ˆå°±ä¸€å®šæœ‰å°æ•°ç‚¹äº†ã€‚
- 64æ˜¯åˆ¶å®šæµ®ç‚¹ç±»å‹ï¼Œæ˜¯float64

### è¿­ä»£

> https://leetcode.com/problems/power-of-two/discuss/63966/4-different-ways-to-solve-Iterative-Recursive-Bit-operation-Math

```js
var isPowerOfTwo = function (n) {
  if (n === 0) {
    return false;
  }
  while (n % 2 === 0) {
    n = Math.floor(n / 2)
  }
  return n === 1;
};
```

> Runtime: 68 ms, faster than 83.02% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.6 MB, less than 46.15% of JavaScript online submissions for Power of Two.

ä¹‹å‰å‘ç°äº†ä¸€ä¸ªéªšæ“ä½œï¼Œå¯ä»¥ç”¨`>>>`æ¥ä»£æ›¿`Math.floor(n/2)`ã€‚ä½†ä¼¼ä¹åœ¨å¤§æ•°çš„æ—¶å€™å°±ä¸è¡Œã€‚

åä¾‹æ˜¯`-2147483648`ï¼Œç†åº”æ˜¯falseï¼Œä½†ç”¨`>>>`æ˜¯true

çœ‹æ¥åœ¨jsé‡Œï¼Œè¿˜æ˜¯[ä¸è¦ä¹±ç”¨ä½æ“ä½œå•Š](https://jerryzou.com/posts/do-you-really-want-use-bit-operators-in-JavaScript/)

```go
func isPowerOfTwo(n int) bool {
	if n == 0 {
		return false
	}
	for n%2 == 0 {
		n /= 2
	}
	return n == 1
}
```

> Runtime: 4 ms, faster than 40.71% of Go online submissions for Power of Two.
>
> Memory Usage: 2.2 MB, less than 100.00% of Go online submissions for Power of Two.

### é€’å½’

```js
var isPowerOfTwo = function (n) {
  return n > 0 && (n === 1 || (n % 2 === 0 && isPowerOfTwo(Math.floor(n / 2))));
};
```

> Runtime: 68 ms, faster than 82.73% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.4 MB, less than 100.00% of JavaScript online submissions for Power of Two.

```go
func isPowerOfTwo(n int) bool {
	return n > 0 && (n == 1 || (n%2 == 0 && isPowerOfTwo(n/2)))
}
```

> Runtime: 0 ms, faster than 100.00% of Go online submissions for Power of Two.
>
> Memory Usage: 2.2 MB, less than 100.00% of Go online submissions for Power of Two.

### éªšæ“ä½œä¹‹n&(n-1)

> ä½œè€…ï¼šjyd
>
> é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/power-of-two/solution/power-of-two-er-jin-zhi-ji-jian-by-jyd/

ç®€è¨€ä¹‹ï¼Œæ»¡è¶³`n > 0` ä¸” `n & (n - 1) == 0`çš„ï¼Œå°±æ˜¯2çš„å¹‚ã€‚

```js
var isPowerOfTwo = function (n) {
  return n > 0 && (n & (n - 1)) === 0
};
```

> Runtime: 68 ms, faster than 83.12% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.9 MB, less than 15.38% of JavaScript online submissions for Power of Two.

```go
func isPowerOfTwo(n int) bool {
	return n > 0 && (n&(n-1)) == 0
}
```

> Runtime: 0 ms, faster than 100.00% of Go online submissions for Power of Two.
>
> Memory Usage: 2.2 MB, less than 75.00% of Go online submissions forPower of Two.

### è¶…çº§éªšæ“ä½œ

> https://leetcode.com/problems/power-of-two/discuss/63966/4-different-ways-to-solve-Iterative-Recursive-Bit-operation-Math

è¿˜æ˜¯ä»è¿™ä¸ªå¤§ä½¬çœ‹åˆ°çš„

```js
var isPowerOfTwo = function (n) {
  return n > 0 && (1073741824 % n == 0);
};
```

> Runtime: 76 ms, faster than 45.28% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.7 MB, less than 23.08% of JavaScript online submissions for Power of Two.

æ•´æ•°èŒƒå›´æ˜¯ -2147483648 (-2^31) ~ 2147483647 (2^31-1)ï¼Œå› æ­¤2çš„æœ€å¤§å¹‚ä¸º 2^30 = 1073741824.

1. å¦‚æœnæ˜¯2çš„å¹‚ï¼Œ$n=2^k$ï¼Œå…¶ä¸­kæ˜¯æ•´æ•°

$2^{30} = (2^k)*2^{30-k}$ï¼Œå³$2^{30}$ % $2^k$ === 0

2. å¦‚æœnä¸æ˜¯2çš„å¹‚ï¼Œå‡è®¾$n=j*2^k$ï¼Œå…¶ä¸­kæ˜¯æ•´æ•°ï¼Œjæ˜¯å¥‡æ•°

$2^{30}$ % $j*2^k$ == $2^{30-k}$ % j !=0

ã€å…¶å®æˆ‘ä¸å¤ªæ‡‚ï¼Œä¸ºå•¥jæ˜¯ä¸€ä¸ªå¥‡æ•°ï¼Œæˆ–è€…è¯´ä¸åº”è¯¥æ˜¯$2^k$åŠ ä¸ŠæŸä¸ªæ•°å—ï¼Ÿã€‘

```go
func isPowerOfTwo(n int) bool {
	return n > 0 && (1073741824%n == 0)
}
```

> Runtime: 0 ms, faster than 100.00% of Go online submissions for Power of Two.
>
> Memory Usage: 2.2 MB, less than 75.00% of Go online submissions forPower of Two.

### æ•°ä¸€ä¸‹1çš„ä¸ªæ•°

å¦‚æœæ˜¯2çš„å¹‚ï¼Œé‚£ä¹ˆ1çš„ä¸ªæ•°å°±åªæœ‰ä¸€ä¸ª

jsæ²¡æœ‰ç°æˆçš„æ•°äºŒè¿›åˆ¶ä¸ªæ•°çš„æ–¹æ³•ï¼Œåªèƒ½æ‰‹å†™ä¸€ä¸ª

> https://blog.csdn.net/qq_27954643/article/details/88981058

```js
bitCount = function (n) {
  if (n < 0) {
    n = n >>> 0; // è·å–åˆ°è´Ÿæ•°çš„è¡¥ç 
  }
  let res = n.toString(2);
  let count = 0;
  for (let i = 0; i < res.length; i++) {
    if (res[i] == 1) {
      count++;
    }
  }
  return count;
}
var isPowerOfTwo = function (n) {
  return n > 0 && bitCount(n) === 1;
};
```

> Runtime: 72 ms, faster than 65.74% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 36.2 MB, less than 15.38% of JavaScript online submissions for Power of Two.

jsé‡Œé¢æ•°1ä¸ªæ•°çš„æ–¹æ³•æœ‰è®¸å¤šï¼Œæ¯”å¦‚è¯´è¿˜æœ‰ï¼š

```js
bitCount = function (n) {
  let count = 0;
  while (n) {// ç›´è‡³æ•´æ•°å˜æˆ0
    count++;
    n = n & (n - 1); // æŠŠæ•´æ•°æœ€å³çš„1å˜æˆ0ï¼Œæœ‰å¤šå°‘ä¸ª1ï¼Œå°±èƒ½è¿›è¡Œå¤šå°‘æ¬¡è¿™æ ·çš„æ“ä½œ
    // åœ¨è®¡ç®—æœºä¸­ï¼Œæ•°å€¼ä¸€å¾‹ç”¨è¡¥ç å­˜å‚¨ã€‚è€Œè¿™é‡Œç”¨çš„æ˜¯ä½è¿ç®—ï¼Œæ‰€ä»¥æ— æ‰€è°“æ­£æ•°è´Ÿæ•°ã€‚
    // å› ä¸ºä½è¿ç®—ä¹‹å‰ï¼Œéœ€è¦æŠŠæ•´æ•°è½¬æ¢æˆäºŒè¿›åˆ¶æ•°ã€‚
  }
  return count;
}
```

> Runtime: 76 ms, faster than 45.28% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.7 MB, less than 23.08% of JavaScript online submissions for Power of Two.

è¿™ä¸ªä¹Ÿç”¨äº†`n&(n-1)`çš„éªšæ“ä½œ

è¿˜æœ‰ï¼š

> https://blog.csdn.net/zjw_python/article/details/82431768

```js
bitCount = function (n) {
  if (n === 0) return 0;
  let count = 0;
  for (let i = 0; i < 32; i++) {
    if ((n >>> i & 1) === 1) {
      count++;
    }
  }
  return count
}
```

> Runtime: 76 ms, faster than 45.28% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.6 MB, less than 23.08% of JavaScript online submissions for Power of Two.



goé‡Œé¢ä¹Ÿæ²¡ç°æˆçš„æ–¹æ³•ï¼Œåªèƒ½æ‰‹å†™ã€‚æ‰‹å†™çš„æ–¹æ³•å’Œjså·®ä¸å¤š

```go
func bitCount(n int) int {
	count := 0
	for n != 0 {
		count++
		n = n & (n - 1)
	}
	return count
}
func isPowerOfTwo(n int) bool {
	return n > 0 && bitCount(n) == 1
}
```

> Runtime: 0 ms, faster than 100.00% of Go online submissions for Power of Two.
>
> Memory Usage: 2.2 MB, less than 75.00% of Go online submissions forPower of Two.

å‰©ä¸‹çš„æ‡’å¾—å†™äº†ã€‚

### è¿™ä¹Ÿèƒ½å«ç®—æ³•å—ï¼Ÿ

32ä½æ•´æ•°ä¸‹ï¼Œ2çš„å¹‚ä¸€å…±å°±åªæœ‰31ä¸ªï¼Œæ‰€ä»¥ã€‚ã€‚

```js
var isPowerOfTwo = function (n) {
  const all = [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768, 65536, 131072, 262144, 524288, 1048576, 2097152, 4194304, 8388608, 16777216, 33554432, 67108864, 134217728, 268435456, 536870912, 1073741824]
  return all.indexOf(n) !== -1
};
```

> Runtime: 64 ms, faster than 92.65% of JavaScript online submissions for Power of Two.
>
> Memory Usage: 35.7 MB, less than 23.08% of JavaScript online submissions for Power of Two.

é€Ÿåº¦æ‹‰æ»¡ğŸ˜‚ğŸ˜‚



goç”¨è¿™ä¸ªä¸å¥½æŸ¥ï¼Œå¾—ç”¨mapå†™ã€‚æˆ‘å°±æ‡’å¾—å†™äº†ã€‚ã€‚åæ­£æ€ä¹ˆå†™éƒ½0mså°é¡¶äº†


