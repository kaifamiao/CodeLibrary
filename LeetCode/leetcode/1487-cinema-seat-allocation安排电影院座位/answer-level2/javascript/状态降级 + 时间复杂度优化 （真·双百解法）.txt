### è§£é¢˜æ€è·¯
![100leetcode.png](https://pic.leetcode-cn.com/9abfb92e3edb1b7b291955a2da6481bb53f4919e82f6413cd81a64ba21400910-100leetcode.png)

ç¬¬ä¸€æ¬¡æš´åŠ›è§£è¶…æ—¶ï¼Œæˆ‘æ€è€ƒäº†ä¸‹ï¼Œå› ä¸ºéšœç¢ç‰©æ•°ç»„`reservedSeats`çš„éåŽ†æ˜¯ä¸å¯é¿å…çš„ï¼Œæ‰€ä»¥è®¾ç½®äº†`ä¸ƒç§çŠ¶æ€`ï¼Œç”¨äºŽ`å‰ªæž`
ä½†æ˜¯ï¼Œåšå®ŒåŽå‘çŽ°è¿˜æ˜¯`è¶…æ—¶`ã€‚
ä»”ç»†æ€è€ƒäº†ä¸‹ðŸ¤”ï¼Œé¢˜ä¸­éšè—æ¡ä»¶æ˜¯ `reservedSeats.length = min(n * 10, 10 ^ 4)`
è¿™è¯´æ˜Ž éšœç¢ç‰©`è‡³å¤š` åªå¯ä»¥åˆ†å¸ƒåœ¨ `10çš„4æ¬¡æ–¹` è¡Œä¸­ã€‚
ç”±äºŽ `n` çš„é‡çº§ æ˜¯  `10 çš„ 9æ¬¡æ–¹` 
æ•…

å½“`n` å¤§äºŽ `10 çš„ 4 æ¬¡æ–¹` æ—¶ï¼Œä¸å­˜åœ¨éšœç¢ç‰©çš„è¡Œæ•°éƒ½æ˜¯ å¯ä»¥å å·¦ å’Œ å³ï¼ˆå³ `ç»“æžœ +2`ï¼‰
`res += (n - Object.keys(flag).length) * 2`

æ•´ä½“æ€æƒ³åˆ†ä¸¤æ­¥

- éåŽ†`éšœç¢ç‰©`æ•°ç»„ï¼Œ`çŠ¶æ€é™çº§`ï¼Œæ”¶é›† `flag` å¯¹è±¡
- éåŽ† `n`  æ±‚è§£ï¼ˆ10çš„4æ¬¡æ–¹æ˜¯ä¸´ç•Œå€¼ï¼ŒéåŽ† `flag key`ï¼Œå‰©ä½™`ä¹˜ä»¥2`ï¼‰

#### çŠ¶æ€é™çº§

æ¯ä¸€è¡Œæ€»å…±å¯èƒ½çš„å‡ºçŽ°çš„çŠ¶æ€æ˜¯

1. ä¸€ä¸ªå››è¿žéƒ½æ²¡æœ‰ `none`ï¼Œè®¡ç®—æ—¶è®°ä¸º 0
2. å·¦å’Œå³éƒ½å¯ä»¥å››è¿ž `lr`ï¼Œ è®¡ç®—æ—¶ è®°ä¸º 2
3. å·¦ä¸­å³ å„è‡ªåå››è¿ž `leftã€midã€right` è®¡ç®—æ—¶ ä¸º 1
4. å·¦ä¸­ å’Œ å³ä¸­ ä¸¤ç§çŠ¶æ€ `lmã€rm`  å› ä¸ºæ˜¯äº’æ–¥çš„ï¼ˆ2-6 å¯ä»¥åï¼Œä½†æ˜¯åªèƒ½å‡ºçŽ°ä¸€ä¸ªå››è¿žï¼‰æ‰€ä»¥è®¡ç®—æ—¶ä¸º 1

éåŽ†éšœç¢ç‰©æ•°ç»„

é»˜è®¤æ¯è¡ŒçŠ¶æ€éƒ½èƒ½å–åˆ° `lr`ï¼Œæ ¹æ®éšœç¢ç‰©åæ ‡è¿›è¡Œ `çŠ¶æ€é™çº§`

å½“ `reservedSeats[i][1] == 2 || reservedSeats[i][1] == 3` æ—¶ï¼Œè¯´æ˜Ž å·¦ä¾§å››è¿žè‚¯å®šä¸èƒ½å
å¦‚æžœæœ¬è¡ŒçŠ¶æ€ä¸º `lr`ï¼Œé™çº§ä¸º `rm`
å¦‚æžœæœ¬è¡ŒçŠ¶æ€ä¸º `left` é™çº§ä¸º `none`
å¦‚æžœæœ¬è¡ŒçŠ¶æ€ä¸º `lm` é™çº§ä¸º `mid`

å…¶ä½™çœ‹ä»£ç å§ï½ž
### ä»£ç 

```javascript
/**
 * @param {number} n
 * @param {number[][]} reservedSeats
 * @return {number}
 */
// ä¸ƒç§çŠ¶æ€
// status = ['left','right', 'mid', 'lr', 'none', 'rm', 'lm']
let res
let vMax
let flag
var maxNumberOfFamilies = function(n, reservedSeats) {
    vMax = n
    res = 0
    flag = {}
    
    for(let i in reservedSeats){
        flag[reservedSeats[i][0]] = flag[reservedSeats[i][0]] || 'lr'
        if(flag[reservedSeats[i][0]] == 'none') continue
        // é™çº§
        
        if(reservedSeats[i][1] == 2 || reservedSeats[i][1] == 3){
            if(flag[reservedSeats[i][0]] == 'left') flag[reservedSeats[i][0]] = 'none'
            if(flag[reservedSeats[i][0]] == 'lr') flag[reservedSeats[i][0]] = 'rm'
            if(flag[reservedSeats[i][0]] == 'lm') flag[reservedSeats[i][0]] = 'mid'
        }else if(reservedSeats[i][1] == 4 || reservedSeats[i][1] == 5){
            if(flag[reservedSeats[i][0]] == 'lm' || flag[reservedSeats[i][0]] == 'left' || flag[reservedSeats[i][0]] == 'mid') flag[reservedSeats[i][0]] = 'none'
            if(flag[reservedSeats[i][0]] == 'lr' || flag[reservedSeats[i][0]] == 'rm') flag[reservedSeats[i][0]] = 'right'
        }else if(reservedSeats[i][1] == 6 || reservedSeats[i][1] == 7){
            if(flag[reservedSeats[i][0]] == 'rm' || flag[reservedSeats[i][0]] == 'right' || flag[reservedSeats[i][0]] == 'mid') flag[reservedSeats[i][0]] = 'none'
            if(flag[reservedSeats[i][0]] == 'lr' || flag[reservedSeats[i][0]] == 'lm') flag[reservedSeats[i][0]] = 'left'
        }else if(reservedSeats[i][1] == 8 || reservedSeats[i][1] == 9){
            if(flag[reservedSeats[i][0]] == 'right') flag[reservedSeats[i][0]] = 'none'
            if(flag[reservedSeats[i][0]] == 'lr') flag[reservedSeats[i][0]] = 'lm'
            if(flag[reservedSeats[i][0]] == 'rm') flag[reservedSeats[i][0]] = 'mid'
        }
    }

    // è¶…è¿‡åçš„å››æ¬¡æ–¹,éåŽ†reservedSeatsï¼Œå‰©ä¸‹ res += (n - reservedSeats.length) * 2
    if(n * 10 > Math.pow(10,4)){
        for(let i of Object.keys(flag)){
            if(flag[i] == 'lr'){
                res += 2
                continue
            }
            if(flag[i] == 'none') continue
            res++
        }
        res += (n - Object.keys(flag).length) * 2
        return res
    }
    for(let i = 1; i< n+1; i++){
        if(!flag[i] || flag[i] == 'lr'){
            res += 2
            continue
        }
        if(flag[i] == 'none') continue
        res++
    }
    return res
};
```