### è§£é¢˜æ€è·¯
æœ‰åºï¼šäºŒåˆ†ã€‚è¦å½¢æˆæ¡ä»¶åå°„ã€‚ä½†æ˜¯æœ¬é¢˜æ˜¯äºŒç»´æ•°ç»„ï¼Œä¸”å‡åºï¼Œæœ€ç®€å•å°±æ˜¯å…¨éƒ¨æå‡ºæ¥æ„å»ºä¸€ç»´æ•°ç»„ï¼Œå®Œå…¨å‡åºï¼Œç›´æ¥å¥—äºŒåˆ†æŸ¥æ‰¾æ¨¡æ¿å³å¯ã€‚

1. base case:[]:è¿”å›å‡ï¼Œæˆ–è€…åˆ—ç©ºä¸ºå‡ã€‚[[],[]]:å‡ã€‚`not matrix or not matrix[0]`æ¡ä»¶`or`çŸ­è·¯è¿ç®—å¦åˆ™matrixå­˜åœ¨ä¸€å®šå­˜åœ¨åˆ—ï¼Œä½†æ˜¯åˆ—å¯èƒ½ä¸ºç©ºï¼Œè¿”å›å‡ã€‚
2. äºŒåˆ†æŸ¥æ‰¾`target`å³å¯ã€‚

### ä¸€ã€è½¬æ¢ä¸€ç»´æ•°ç»„
```python3 []
class Solution:
    def searchMatrix(self, matrix: List[List[int]], target: int) -> bool:
        if not matrix or not matrix[0]:
            return False
        left, right = 0, len(matrix) * len(matrix[0]) - 1
        array = [column for row in matrix for column in row]
        while left <= right:
            mid = ((right - left) >> 1) + left
            if array[mid] == target:
                return True
            elif array[mid] < target:
                left = mid + 1  # ascending
            else:
                right = mid - 1
        return False
```
### äºŒã€äºŒç»´æ•°ç»„æ­£çœŸä½œä¸ºä¸€ç»´çœ‹å¾…(å–ä½™è¿ç®—)
å› ä¸ºä¸€ç›´æ˜¯å‡åºï¼Œå› æ­¤å¯ä»¥é€šè¿‡ç›´æ¥è®¤ä¸ºä¸€ç»´æ•°ç»„è¿ç»­å‡åºï¼Œåˆ™éœ€è¦è¿›è¡Œè¡Œåˆ—åˆ¤æ–­æ‰è¡Œ
+ è¡Œçš„ç´¢å¼•:`row = mid / *matrixColSize`
+ åˆ—çš„ç´¢å¼•:`column = mid % *matrixColSize`

è¿™ä¸ªæ•ˆç‡æœ€ä½ã€‚ã€‚ã€‚å¯èƒ½å–ä½™è¿ç®—å¯¼è‡´çš„ã€‚

```c []
bool searchMatrix(int** matrix, int matrixSize, int* matrixColSize, int target){
    if (!matrixSize || !matrixColSize) return false;  // ç‰¹åˆ¤
    int left = 0, right = (*matrixColSize) * matrixSize - 1, mid;
    int row, column;  // ä»£è¡¨è¡Œåˆ—
    while (left <= right) {
        mid = left + ((right - left) >> 1);
        row = mid / *matrixColSize;  // é™¤æ³•å–æ•´è¡Œ(å®šä½æ­¤è¡Œ)
        column = mid % *matrixColSize;  // å–ä½™å¾—åˆ°åˆ—(å®šä½æ­¤åˆ—)
        if (matrix[row][column] == target) return true;
        else if (matrix[row][column] > target) right = mid - 1;
        else left = mid + 1;
    }
    return false;
}
```

### ä¸‰ã€é€’å½’
æ­¤é¢˜Cé€’å½’å†™æ³•å‚è€ƒ[1351.ç»Ÿè®¡æœ‰åºæ•°ç»„ä¸­çš„è´Ÿæ•°ä¸ªæ•°](https://leetcode-cn.com/problems/count-negative-numbers-in-a-sorted-matrix)ã€‚
1. ç‰¹ä¾‹è·Ÿä¸Šé¢ä¸€æ ·ï¼Œè¡Œç©ºæˆ–è€…åˆ—ç©ºè¿”å›å‡
2. é€’å½’äºŒåˆ†æœç´¢ç¬¦åˆæ¡ä»¶çš„è¡Œï¼Œæ»¡è¶³è¦æ±‚çš„è¡Œæ‰è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾target
3. è¡Œè¾¹ç•Œå¤„ç†é—®é¢˜ï¼šè¡Œè¶…ç•Œå°±æ˜¯è¡ŒäºŒåˆ†ç»ˆæ­¢

```c []
bool searchMatrix(int** matrix, int matrixSize, int* matrixColSize, int target){
    bool solve(int low, int high) {
        if (low > high) return false;  // 1.è¡ŒäºŒåˆ†ç»“æŸ
        int isrow = 0, isfind = false;  // è¡Œæ‰¾å¯¹äº†å—ï¼Ÿisfindæ˜¯å¦æ‰¾åˆ°target
        int right = (*matrixColSize) - 1, left = 0, mid;
        int mid_row = (high - low) / 2 + low;  // ä¸­é—´è¡Œ 
        if (matrix[mid_row][0] > target) isrow = -1;  // ä¸Šæ‰¾
        if (matrix[mid_row][right] < target) isrow = 1;  // ä¸‹æ‰¾
        // 2.å¼€å§‹äºŒåˆ†æœç´¢
        if (isrow == 0) {  // è¡Œå¯¹äº†æ‰æ‰¾ï¼Œå¦åˆ™ä¸æ‰¾
            while (left <= right) {
                mid = (right - left) / 2 + left;  // åˆ—ä¸­å¿ƒ
                if (matrix[mid_row][mid] == target) return true;
                else if (matrix[mid_row][mid] < target) left = mid + 1;
                else right = mid - 1;  // å·¦ç§»é«˜æŒ‡é’ˆ
            }
        }
        // 3.äºŒåˆ†æœç´¢å¯èƒ½å­˜åœ¨è¡Œ
        if (isrow > 0) return solve(mid_row + 1, high);  // ä¸‹æ‰¾
        else if (isrow < 0) return solve(low, mid_row - 1);  // ä¸Šæ‰¾
        return isfind;  // 4.è¡Œå¯¹äº†ï¼Œè¿”å›æ˜¯å¦æ‰¾åˆ°
    }
    return matrixSize && (*matrixColSize) ? solve(0, matrixSize - 1) : 0;  // [[]],1
}
```

### å››ã€è¿­ä»£äºŒåˆ†æ­£ç¡®å§¿åŠ¿
+ æ˜ç¡®è¡ŒäºŒåˆ†æ˜¯æ‰¾èŒƒå›´ï¼Œè€Œä¸æ˜¯æ‰¾å®šå€¼ï¼Œæ¯”å¦‚[[1,2,3],[5,6,7]]æ‰¾4ï¼Œé‚£ä¹ˆå¦‚æœåœ¨0è¡Œæ‰¾ï¼Œé¦–å…ˆåˆ¤æ–­æœ«å°¾å…ƒç´ ä¸èµ·å§‹å…ƒç´ ä¸targetå¤§å°è€Œè·³è¿‡æŸ¥æ‰¾ã€‚
+ åˆ—äºŒåˆ†æ˜¯åœ¨**è¡Œç¡®å®š**æƒ…å†µä¸‹æ‰è¿›è¡ŒæŸ¥æ‰¾ï¼Œä¸æ˜¯æš´åŠ›éå†è¡Œä¸€ä¸ªä¸ªæŸ¥åˆ—å…ƒç´ ã€‚

ä¹Ÿå°±æ˜¯å…ˆå¯¹è¡Œçš„ä¸¤ç«¯å¤§å°è¿›è¡Œåˆ¤æ–­ï¼Œä¸å¸¸è§„äºŒåˆ†ä¸åŒã€‚
```
if (matrix[mid_row][0] > target) {
    right = mid_row - 1;  // å‘ä¸Šæ‰¾
    refresh = true;  // åˆ·æ–°
}
if (matrix[mid_row][(*matrixColSize)-1] < target) {
    left = mid_row + 1;  // å‘ä¸‹
    refresh = true;  // åˆ·æ–°
}
```
ä¸Šé¢ä¸¤ä¸ªifåˆ¤æ–­å·¦å³ä¸¤ä¸ªè¾¹ç•Œï¼Œ`if-else if`ä¼šæ¼åˆ¤`[[1],[1]]`è¿™ç§æƒ…å†µã€‚ä¹Ÿæ˜¯æ›´æ–°è¡ŒæŸ¥æ‰¾çš„å…³é”®ï¼Œå¦‚æœ`refresh=false`å°±è¯æ˜æ‰¾åˆ°æ­£ç¡®çš„è¡Œï¼Œè¿›è¡Œåˆ—äºŒåˆ†æŸ¥æ‰¾å³å¯ã€‚

```c []
bool searchMatrix(int** matrix, int matrixSize, int* matrixColSize, int target){
    if (!matrixSize || !(*matrixColSize)) return false;  // ç‰¹åˆ¤
    int left = 0, right = matrixSize - 1, mid_row;  // è¡ŒäºŒåˆ†æŸ¥æ‰¾
    bool refresh = false;  // åˆå§‹åŒ–ä¸ºè¡ŒäºŒåˆ†æ˜¯å¦åˆ·æ–°mid_row
    while (left <= right) {
        mid_row = left + ((right - left) >> 1);
        if (matrix[mid_row][0] > target) {
            right = mid_row - 1;  // å‘ä¸Šæ‰¾
            refresh = true;  // åˆ·æ–°
        }
        if (matrix[mid_row][(*matrixColSize)-1] < target) {
            left = mid_row + 1;  // å‘ä¸‹
            refresh = true;  // åˆ·æ–°
        }
        if (!refresh) {  // 1.æ²¡åˆ·æ–°è¯æ˜æ‰¾åˆ°ç‰¹å®šè¡Œ
            int L = 0, R = (*matrixColSize) - 1, mid;  // åˆ—äºŒåˆ†æ“ä½œ
            while (L <= R) {
                mid = L + ((R - L) >> 1);
                if (matrix[mid_row][mid] == target) return true;
                else if (matrix[mid_row][mid] > target) R = mid - 1;
                else L = mid + 1;
            }
            break;  // åªè¦è¿›æ¥äº†ï¼Œä¸æ»¡è¶³å°±ä¸€å®šæ²¡æ‰¾åˆ°
            // return false;
        }else refresh = false;  // å¦åˆ™åˆ·æ–°ä¸ºfalse
    }
    return false;  // äºŒåˆ†è¡Œæ‰¾ä¸åˆ°é”™è¯¯ï¼Œè¿”å›å‡
}
```
### 5."ä¹Œé¾Ÿ"çˆ¬å¯¹è§’çº¿O(m+n)
é¢ï¼Œåº”è¯¥ç®—æ˜¯äºŒç»´æ•°ç»„åŒæŒ‡é’ˆå§ï¼ŒğŸ¥
é¦–å…ˆæ•°ç»„å±•å¼€æ˜¯å‡åºçš„ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡æ¯è¡Œè¾¹ç•Œå€¼æ¥ç¡®å®šèŒƒå›´ï¼Œç›¸å½“äºé•¿åº¦ä¸€å®šçš„äºŒåˆ†æ³•ï¼

ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·çˆ¬ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©ä»å¯¹è§’çº¿çˆ¬ï¼Ÿ
+ å› ä¸ºæ•°ç»„çš„åˆ—å¤§å°æ˜¯**â†**ä¸”è¡Œå…ƒç´ æ˜¯**â†“**ï¼Œå³ä»å¯¹è§’çº¿çˆ¬æœ€å¿«ã€‚
+ å½“`matrix[row][column]>target`:
    + 1.çˆ¬åˆ°ä¸‹è¡Œäº†ï¼Œæƒ³è¦é€šè¿‡`column--`æœç´¢å½“å‰è¡Œå†…åˆ—æ˜¯å¦æœ‰æ»¡è¶³ã€‚
    + 2.åˆšå¥½æ˜¯è¿™è¡Œï¼Œä¾ç„¶é€šè¿‡`column--`æœç´¢å½“å‰è¡Œå†…åˆ—æ˜¯å¦æœ‰æ»¡è¶³ã€‚
    + æœ€ç»ˆï¼Œæ‰¾åˆ°å°±è¿”å›ã€‚å¦åˆ™`column < 0`è¶…ç•Œä¸å­˜åœ¨
+ å½“`matrix[row][column]<target`:
    + 1.æ­¤è¡Œä¸å¤Ÿï¼Ÿä¸ºä»€ä¹ˆä¸å¯ä»¥é€šè¿‡`column++`å³ç§»å˜å¤§ï¼Ÿä¸ä¼šçš„ï¼Œå› ä¸ºä¹‹å‰ä»å³ä¾§è¿‡æ¥çš„ã€‚
    + 2.åªèƒ½å¾€ä¸‹ç»§ç»­èµ°å³`row++`ï¼Œç›´åˆ°æ‰¾åˆ°æˆ–è€…è¶…ç•Œã€‚

```c []
bool searchMatrix(int** matrix, int matrixSize, int* matrixColSize, int target){
    if (!matrixSize || !(*matrixColSize)) return false;  // ç‰¹åˆ¤
    int row = 0, column = (*matrixColSize) - 1, mid_row;  // è¡ŒäºŒåˆ†æŸ¥æ‰¾
    while (row < matrixSize && column >= 0) {
        if (matrix[row][column] == target) return true;
        else if (matrix[row][column] > target) column--;
        else row++;
    }
    return false;
}
```

ä¸‹é¢çœ‹ä¸€ä¸ªåŠ¨å›¾ï¼Œå±•ç¤ºä¸ºä»€ä¹ˆå¯ä»¥çˆ¬ï¼Œå®é™…å°±æ˜¯æ‰¾åˆ†ç•Œçº¿ã€‚
![ä¹Œé¾Ÿçˆ¬å±•å¼€.gif](https://pic.leetcode-cn.com/9b941c77a43368ca9ac5f6d799ee9f6a7d4a42093330e1845a4eae906e4755d8-%E4%B9%8C%E9%BE%9F%E7%88%AC%E5%B1%95%E5%BC%80.gif)

å› ä¸ºæ•°ç»„å‡åºï¼Œçˆ¬çš„è¿‡ç¨‹å°±æ˜¯æ¯æ¬¡åˆ†æ®µèµ°ï¼Œè¿™æ®µèµ°çš„å®½åº¦å°±æ˜¯åˆ—å®½åº¦ã€‚æ‰€ä»¥å…ˆç¡®å®šæŸ¥æ‰¾æ•°æ®çš„è¡Œæ•°ï¼Œç„¶åå†ç§»åŠ¨åˆ—å»çœ‹æ˜¯å¦æ‰¾åˆ°ï¼Œç›´åˆ°åˆ—è¶…ç•Œï¼Œä¹Ÿå°±æ˜¯è·‘åˆ°ä¸Šä¸€è¡Œçš„å…ƒç´ å»å°±è¯æ˜æ²¡æ‰¾åˆ°ã€‚åŒæ ·ä¸€ç›´å¾€ä¸‹çˆ¬ï¼Œä½¿å¾—è¡Œè¶…ç•Œï¼Œä¸€æ•´æ¡è¿èµ·æ¥çš„å‡åºé“¾æœ€å¤§å€¼éƒ½å°äºtargetå°±æ˜¯æ‰¾ä¸åˆ°ã€‚

#### 5.1 "ä¹Œé¾Ÿçˆ¬"ä¸äºŒåˆ†å¯¹æ¯”
æ¯”å¦‚åœ¨å‡åºäºŒç»´æ•°ç»„ä¸­æ‰¾åˆ°`83`
![image.png](https://pic.leetcode-cn.com/5ac484cf750f373ab6cbc41ba7f829d2538a9105e7bc698fbf6ee1d92683b50f-image.png)
ä¸€å…±éœ€è¦ç§»åŠ¨10æ­¥æ‰æ‰¾åˆ°ç»“æœã€‚è€ŒäºŒåˆ†æŸ¥æ‰¾å°±çœ‹å›¾å°±è¡Œäº†ã€‚
![äºŒåˆ†æŸ¥æ‰¾ç¤ºæ„å›¾.gif](https://pic.leetcode-cn.com/cfcfb9850be24fa6bbe4da5fc04ac7b0ed8e737659591c03e439a7e7334c5bbb-%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%A4%BA%E6%84%8F%E5%9B%BE.gif)

è¿™ç§çœ‹èµ·æ¥æ¯”äºŒåˆ†æ¥çš„æ…¢ï¼Œå› ä¸ºä»å¤´ä¸€ä¸ªä¸ªèµ°ï¼Œè·Ÿè·³ç€èµ°å°±å·®å¤šäº†ï¼Œå°¤å…¶æ˜¯æœç´¢åœ¨æœ€åä½ç½®ã€‚è¿™ç§æ–¹æ³•å°±æ˜¯åŸºäºç¡®å®šå°èŒƒå›´ï¼Œç„¶åæŸ¥æ‰¾ï¼Œç±»ä¼¼çš„é¢˜ç›®å¯ä»¥è§£å†³çš„å°±æ˜¯ï¼š
+ [1351.ç»Ÿè®¡æœ‰åºæ•°ç»„ä¸­çš„è´Ÿæ•°ä¸ªæ•°](https://leetcode-cn.com/problems/count-negative-numbers-in-a-sorted-matrix)
+ [240.æœç´¢äºŒç»´çŸ©é˜µâ…¡](https://leetcode-cn.com/problems/search-a-2d-matrix-ii/)


## ç»¼ä¸Šï¼š
è¡Œçš„äºŒåˆ†æŸ¥æ‰¾æ­£ç¡®æ–¹å¼æ˜¯ä¸¤ç«¯èŒƒå›´ï¼ŒåŒæ—¶è¿˜æ ¹æ®äºŒåˆ†è¡ŒæŸ¥æ‰¾æŠ›å¼ƒä¸æ»¡è¶³çš„è¡Œã€‚åœ¨æ‰¾åˆ°è¡Œçš„å‰æä¸‹å†æŸ¥æ‰¾æ˜¯å¦åˆ—ä¸­åŒ…å«targetã€‚