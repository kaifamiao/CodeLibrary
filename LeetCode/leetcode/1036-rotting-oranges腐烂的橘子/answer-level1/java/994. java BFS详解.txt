### è§£æ³• BFS

```java
private static int[][] ds = {{0, 1}, {1, 0}, {0, -1}, {-1, 0}};
    private Queue<int[]> queue;
    private int n, m;

    public int orangesRotting(int[][] grid) {
        n = grid.length;
        m = grid[0].length;
        queue = new LinkedList<>();
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++)
                if (grid[i][j] == 2)
                    queue.add(new int[]{i, j}); // ç¬¬0å¤©å°±è…çƒ‚çš„
        }
        while (!queue.isEmpty()) {
            int[] pos = queue.remove();
            newRot(grid, pos);
        }
        int res = 0;
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < m; j++){
                if (grid[i][j] == 1)
                    return -1;
                res = Math.max(res, grid[i][j]);
            }
        }
        return res >= 2 ? res - 2 : 0; // é¿å…æ ¼å­ä¸­æ²¡æœ‰æ”¾æ©˜å­çš„æƒ…å†µ
    }

    private void newRot(int[][] grid, int[] pos) {
        int x = pos[0], y = pos[1];
        for(int[] d : ds){
            int newX = x + d[0];
            int newY = y + d[1];
            if(isIn(newX, newY) && grid[newX][newY] == 1){
                grid[newX][newY] = grid[x][y] + 1;
                queue.add(new int[]{newX, newY});
            }
        }
    }

    private boolean isIn(int x, int y) {
        return x >= 0 && x < n && y >= 0 && y < m;
    }
```

æ€è·¯åˆ†æï¼š

* é¦–å…ˆï¼Œè…çƒ‚æ©˜å­ä¼šæ„ŸæŸ“ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘çš„æ©˜å­ï¼Œå¦‚æœæˆ‘ä»¬å°†è…çƒ‚æ©˜å­çœ‹æˆä¸€ä¸ªç»“ç‚¹ï¼Œé‚£ä¹ˆå…¶ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘çš„æ©˜å­è…çƒ‚åä¹Ÿæˆä¸ºä¸€ä¸ªç»“ç‚¹ï¼Œä»–ä»¬éƒ½æ˜¯ç›¸è¿æ¥çš„ã€‚æ‰€ä»¥è…çƒ‚æ©˜å­å…¶å®æ„æˆäº†ä¸€ä¸ªå›¾ï¼Œè¿™ä¸ªå›¾ä¸­æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿é€šå­å›¾ã€‚
* ç”±äºæ©˜å­ä¸€åˆ†é’Ÿå¯ä»¥å°†ä¸Šä¸‹å·¦å³çš„æ©˜å­è…çƒ‚ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±åƒæ— å‘å›¾ä¸­çš„æœç´¢è¿‡ç¨‹ï¼Œè¦æ±‚æ©˜å­çš„è…çƒ‚å®Œå…¨çš„æœ€çŸ­åˆ†é’Ÿæ•°ï¼Œå°±ç­‰ä»·äºåœ¨æ— å‘å›¾ä¸­æ‰¾åˆ°è¾¾åˆ°å„ä¸ªç»“ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸­çš„æœ€å¤§å€¼ã€‚æ‰€ä»¥æ˜ç¡®ä¹‹åå°±å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªBFSï¼Œåªä¸è¿‡æœ‰è¿™é‡Œæœ‰å¤šä¸ªè¿é€šå­å›¾ã€‚
* å°±åƒå›æº¯ç®—æ³•é¢˜è§£ä¸­å¾ˆå¸¸è§çš„äºŒç»´å¹³é¢çš„æœç´¢ã€‚å®ä¾‹å˜é‡`int[][] ds`è¡¨ç¤ºä¸Šä¸‹å·¦å³ç§»åŠ¨çš„åæ ‡å˜åŒ–é‡ï¼Œå¹¶ä¸”ç”¨`private int n, m;`åˆ†åˆ«è¡¨ç¤ºè¡Œåˆ—æ•°ã€‚ä¸”å†™ä¸€ä¸ªé˜²æ­¢æ•°ç»„ç´¢å¼•è¶Šç•Œçš„åˆ¤æ–­å‡½æ•°` private boolean isIn(int x, int y)`ã€‚
* æ¥ä¸‹æ¥ï¼Œå®Œæˆæˆ‘ä»¬BFSå‡½æ•°çš„è®¾è®¡ã€‚
    * éœ€è¦ä¸€ä¸ªä¿ç•™ç»“ç‚¹çš„é˜Ÿåˆ—`private Queue<int[]> queue;`
    * ç”±äºè¿é€šå­å›¾çš„å­˜åœ¨ï¼Œ9-13è¡Œå°†æ‰€æœ‰åˆå§‹æ—¶å€™è…çƒ‚çš„æ©˜å­`grid[i][j] == 2`çš„åæ ‡æ”¾å…¥é˜Ÿåˆ—ä¸­ã€‚
    * å¯¹äºæŸä¸ªç‚¹çš„æœç´¢ï¼Œä½¿ç”¨å‡½æ•°`newRot(int[][] grid, int[] pos)`ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºè¯¥ç‚¹çš„åæ ‡ï¼Œå°†è¯¥ç‚¹ä¸Šä¸‹å·¦å³å››ä¸ªç‚¹çš„åæ ‡ç®—å‡ºï¼Œä¿è¯ä¸è¶Šç•Œçš„æƒ…å†µä¸‹`isIn(newX, newY)`ï¼Œå¦‚æœç›¸é‚»å››ç‚¹æœ‰æ–°é²œæ©˜å­`grid[newX][newY] == 1`ã€‚å°†è¯¥æ©˜å­æ„ŸæŸ“æ—¶é—´è®¾ç½®ä¸ºä¸Šä¸€ä¸ªæ©˜å­æ„ŸæŸ“æ—¶é—´åŠ 1ã€‚ç„¶åæ”¾å…¥é˜Ÿåˆ—ï¼Œå‡†å¤‡ç”¨å®ƒå†å»æ„ŸæŸ“åˆ«çš„æ©˜å­ï¼ˆç”¨å®ƒæ¥ç€è¿›è¡Œå¹¿åº¦ä¼˜å…ˆéå†ï¼‰
    * æ„ŸæŸ“æ—¶é—´ç›´æ¥ä½¿ç”¨`grid[][]`æ¥è®°å½•ï¼Œè§„å®šåˆå§‹æ—¶å€™æ„ŸæŸ“çš„æ©˜å­ä¸º2è¿™ä¸ªæ—¶åˆ»ã€‚
    * 14-17è¡Œï¼Œè…çƒ‚æ©˜å­é˜Ÿåˆ—éç©ºæ—¶å–å‡ºä¸€ä¸ªè…çƒ‚çš„æ©˜å­ï¼Œå°†å…¶å‘¨å›´æ„ŸæŸ“ï¼Œé€šè¿‡`newRot`å‡½æ•°åªä¼šæ„ŸæŸ“ç›¸é‚»çš„ã€‚
* æœç´¢å®Œæˆåï¼Œå†ä¸€æ¬¡éå†ï¼Œå¦‚æœæœ‰å‘ç°æœªæ„ŸæŸ“çš„æ©˜å­`grid[i][j] == 1`ï¼Œä¾ç…§é¢˜æ„è¿”å›-1ã€‚å¦åˆ™è®°å½•æœ€æ™šæ„ŸæŸ“çš„æ©˜å­åœ¨ç¬¬å‡ åˆ†é’Ÿè¢«æ„ŸæŸ“ã€‚
* å½“ç„¶æœ€åè¿˜éœ€è¦æ³¨æ„ï¼Œæœ‰ä¸€ç§æƒ…å†µï¼Œåˆå§‹æ—¶å‹æ ¹å°±æ²¡æœ‰æ–°é²œæ©˜å­ï¼Œè¿™ä¸ªæ—¶å€™è¦è¿”å›çš„æ˜¯0ï¼Œæ‰€ä»¥æœ€åè¿”å›å€¼è¿˜éœ€è¦ä¸€ä¸ªåˆ¤æ–­`return res >= 2 ? res - 2 : 0;`

è¿è¡Œç»“æœï¼š

* æ‰§è¡Œç”¨æ—¶ :3 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†71.71%çš„ç”¨æˆ·
* å†…å­˜æ¶ˆè€— :38.6 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†52.94%çš„ç”¨æˆ·

æ›´å¤šLeetCodeé¢˜è§£è¯·çœ‹æˆ‘çš„[github](https://github.com/ustcyyw/yyw_algorithm)ï¼Œåœ°å€https://github.com/ustcyyw/yyw_algorithmã€‚è¿˜æœ‰åˆ«çš„å°é¡¹ç›®ä¹Ÿå¾ˆå¥½ç©~å‘å¾®æ±‚ä¸ªå°æ˜Ÿæ˜ŸğŸ’–