å…¶ä»–é¢˜è§£éƒ½åªæœ‰ä»£ç ä»€ä¹ˆğŸ‘»é¢˜è§£ä¸åº”è¯¥éƒ½å¸¦ä¸Šè¯¦ç»†çš„è§£é¢˜æ€è·¯ä¹ˆï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªåšå¼ˆé—®é¢˜ï¼š  
## è‹¥å½“å‰ä¸ºè€é¼ èµ°ï¼š
åˆ†æè€é¼ çš„æ‰€æœ‰å¯èµ°çš„ç‚¹çš„æƒ…å†µï¼Œå‡å¦‚è€é¼ å½“å‰åœ¨`O`ç‚¹ï¼Œæœ‰`Aã€Bã€Cã€D`å››ç‚¹å¯èµ°ï¼š 
1. å…¶ä¸­æœ‰ä¸€ä¸ªç‚¹ï¼Œå‡å¦‚æ˜¯`A`ï¼Œèƒ½é¡ºåˆ©è¾¾åˆ°ç›®æ ‡æ´å£ï¼Œé‚£ä¹ˆèªæ˜çš„è€é¼ ä¸€å®šçŸ¥é“æ²¿ç€Aç‚¹èµ°ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å½“å‰ç‚¹ä¹Ÿèƒ½åˆ°è¾¾ç›®æ ‡æ´å£
2. è‹¥`Aã€Bã€Cã€D`éƒ½èƒ½æ— æ³•è¾¾åˆ°ç›®æ ‡æ´å£ï¼Œè¿™é‡Œåˆéœ€è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µæ¥çœ‹äº†ï¼š 
    1. `Aã€Bã€Cã€D`æ— è®ºèµ°å“ªç‚¹éƒ½ä¼šè¢«çŒ«æ‰åˆ°ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å½“å‰ç‚¹`O`ä¹Ÿä¸€å®šä¼šè¢«çŒ«æ‰åˆ°
    2. `Aã€Bã€Cã€D`ä¸­å­˜åœ¨ä¸€äº›ç‚¹ä¸ä¼šè¢«çŒ«æ‰åˆ°ï¼Œä¹Ÿä¸èƒ½è¾¾åˆ°å…¥å£çš„ï¼Œèªæ˜çš„è€é¼ è‚¯å®šçŸ¥é“ä¼˜å…ˆä»ä¸è¢«çŒ«æ‰åˆ°çš„ç‚¹è¡Œèµ°äº†ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å½“å‰ç‚¹`O`ä¹Ÿæ— æ³•çš„çŠ¶æ€å°±æ˜¯`0`äº†ï¼Œå³ä¸èƒ½åˆ°æ´å£ï¼Œä¹Ÿä¸ä¸ä¼šè¢«çŒ«æ‰ä½ã€‚

ä¾æ¬¡åˆ¤æ–­è€é¼ æ¯ä¸ªä¸‹ä¸ªç‚¹çš„çŠ¶æ€ï¼š
1. è‹¥å­˜åœ¨ä¸€ä¸ªç‚¹èƒ½è¿›æ´ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯è€é¼ èµ¢ï¼Œè¿”å›`1`
2. ä¸å­˜åœ¨èƒ½è¿›æ´çš„ç‚¹  
    1. è‹¥æ¯ä¸€ä¸ªç‚¹éƒ½å°†è¢«çŒ«æ‰ä½ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯çŒ«èµ¢ï¼Œè¿”å›`2`  
    2. è‹¥å­˜åœ¨ä¸€ä¸ªç‚¹ï¼Œå³ä¸è¢«çŒ«æŠ“ä½ï¼Œä¹Ÿæ— æ³•è¿›æ´é‚£ä¹ˆå¹³å±€ï¼Œè¿”å›`0`  

## è‹¥å½“å‰ä¸ºçŒ«èµ°ï¼š
åˆ†æçŒ«çš„æ‰€æœ‰å¯èµ°çš„ç‚¹çš„æƒ…å†µï¼Œå‡å¦‚çŒ«å½“å‰åœ¨`O`ç‚¹ï¼Œæœ‰`Aã€Bã€Cã€D`å››ç‚¹å¯èµ°ï¼š
1. å…¶ä¸­æœ‰ä¸€ä¸ªç‚¹ï¼Œå‡å¦‚æ˜¯`A`ï¼Œèƒ½æŠ“åˆ°è€é¼ ï¼Œé‚£ä¹ˆèªæ˜çš„çŒ«ä¸€å®šçŸ¥é“æ²¿ç€`A`ç‚¹èµ°ï¼Œé‚£ä¹ˆå¯ä»¥çŸ¥é“å½“å‰ç‚¹ä¹Ÿä¸€å®šèƒ½æŠ“åˆ°è€é¼ äº†ã€‚
2. è‹¥`Aã€Bã€Cã€D`éƒ½æ— æ³•æŠ“åˆ°è€é¼ ï¼Œé‚£ä¹ˆåˆéœ€è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µæ¥è®¨è®ºäº†ï¼š
    1. `Aã€Bã€Cã€D`å››ä¸ªç‚¹éƒ½è¢«è€é¼ é€ƒå›æ´é‡Œäº†ï¼Œé‚£ä¹ˆçŒ«æ— è®ºå¦‚ä½•ä¹Ÿæ— æ³•æŠ“ä½çŒ«ï¼Œè‚¯å®šæ˜¯è€é¼ èµ¢äº†
    2. `Aã€Bã€Cã€D`ä¸­å­˜åœ¨ä¸€äº›ç‚¹èƒ½è®©è€é¼ é€ƒä¸ä¼šæ´é‡Œï¼Œé‚£ä¹ˆèªæ˜çš„çŒ«ä¸€å®šèµ°è¿™äº›ç‚¹ï¼Œä¸è®©è€é¼ é€ƒå›æ´é‡Œï¼Œå› æ­¤çŒ«å½“å‰ç‚¹`O`çš„çŠ¶æ€ä¸ºæ—¢æŠ“ä¸ä½è€é¼ ï¼Œä¹Ÿä¸ä¼šè®©è€é¼ é€ƒåˆ°æ´é‡Œé¢ã€‚

ä¾æ¬¡åˆ¤æ–­çŒ«æ¯ä¸ªä¸‹ä¸ªç‚¹çš„çŠ¶æ€ï¼š
1. è‹¥å­˜åœ¨ä¸€ä¸ªç‚¹éƒ½èƒ½æŠ“åˆ°è€é¼ ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯çŒ«èµ¢ï¼Œè¿”å›`2`  
2. ä¸å­˜èƒ½æŠ“åˆ°è€é¼ çš„ç‚¹  
    1. è‹¥æ¯ä¸€ä¸ªç‚¹éƒ½è®©è€é¼ é€ƒå›æ´ä¸­äº†ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯è€é¼ èµ¢ï¼Œè¿”å›`1`  
    2. è‹¥å­˜åœ¨ä¸€ä¸ªç‚¹æ—¢æŠ“ä¸ä½è€é¼ ï¼Œä¹Ÿèƒ½é˜»æ­¢è€é¼ è¿›æ´ï¼Œé‚£ä¹ˆå¹³å±€ï¼Œè¿”å›`0`  

é‚£ä¹ˆæ€ä¹ˆç¡®å®šé‚£ä¸ªå¹³å±€çš„ç‚¹å‘¢ï¼Ÿ  
æˆ‘ä»¬çŸ¥é“ï¼Œè€é¼ èµ°å®Œæ•´ä¸ª`graph`è‡³å°‘éœ€è¦`graph.length`æ­¥ï¼Œå› æ­¤è€é¼ åˆ°æ´é‡Œçš„æœ€é•¿æ­¥æ•°ä¸º`graph.length`æ­¥ï¼Œå¦‚æœè¿™ä¹ˆå¤šæ­¥æ•°è¿˜åˆ°ä¸äº†æ´é‡Œï¼Œé‚£ä¹ˆåŸºæœ¬ä¸Šæ°¸è¿œä¹Ÿåˆ°ä¸äº†æ´äº†~ï¼ŒåŒæ ·çš„é“ç†ï¼Œå¦‚æœçŒ«æ²¡èƒ½åœ¨`graph.length`æ­¥æ‰åˆ°è€é¼ é‚£ä¹ˆæ°¸è¿œä¹ŸæŠ“ä¸åˆ°è€é¼ äº†ã€‚å› æ­¤ç¡®å®šå¹³å±€çš„é‚£ä¸ªç‚¹å³åŒæ–¹éƒ½èµ°è¿‡äº†`graph.length`æ­¥çš„é‚£ä¸ªç‚¹ï¼Œå³æ€»å…±`2*graph.length`æ­¥çš„ç‚¹ã€‚

```javascript
var catMouseGame = function(graph) {
    let N = graph.length;
    let dp = new Array(N*2).fill(0)
             .map(_=>new Array(N).fill(0)
             .map(_=>new Array(N).fill("#")));
    return tools(0,1,2);
    
    function tools(t,m,c){
        
        if(t>=2*N)return 0;                     
        if(dp[t][m][c]!="#")return dp[t][m][c];
        if(m===0) return dp[t][m][c]=1;
        if(m===c) return dp[t][m][c]=2;
        if(t%2===0){                                //è€é¼ èµ°~
            let nextM = graph[m];       
            let resultSet = new Set();
            for(let nm of nextM){
                let nextAns = tools(t+1,nm,c);
                if(nextAns===1)return dp[t][m][c]=1;
                resultSet.add(nextAns);
            }
            return resultSet.size===1?(dp[t][m][c]=Array.from(resultSet)[0]):(dp[t][m][c]=0)
        }else{                                      //çŒ«èµ°
            let nextC = graph[c];
            let resultSet = new Set();
            for(let nc of nextC){
                if(nc===0)continue;                 //çŒ«ä¸èƒ½èµ°0ä½ç½®
                let nextAns = tools(t+1,m,nc);
                if(nextAns===2)return dp[t][m][c]=2;
                resultSet.add(nextAns);
            }
            return resultSet.size===1?(dp[t][m][c]=Array.from(resultSet)[0]):(dp[t][m][c]=0)
        }
    }
};
```