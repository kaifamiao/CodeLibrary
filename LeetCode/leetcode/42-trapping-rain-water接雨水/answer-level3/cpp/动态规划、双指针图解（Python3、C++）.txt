
### æ–¹æ³•ä¸€ï¼šæš´åŠ›ï¼ˆPython è¶…æ—¶ï¼‰
ä¸€å¼€å§‹æ‹¿åˆ°é¢˜ç›®ä¹‹åå¯èƒ½ä¼šæœ‰äº›æ‰‹è¶³æ— æªï¼Œæˆ‘ä»¬ä»æœ€åŸå§‹çš„æš´åŠ›è§£æ³•å¼€å§‹æ€è€ƒï¼Œå¯¹äºæ¯ä¸ªä¸‹æ ‡ iï¼Œæˆ‘ä»¬è®¡ç®—å®ƒä¸Šæ–¹å¯ä»¥æ¥å¤šå°‘é›¨æ°´ï¼Œç„¶åå°†æ‰€æœ‰ä¸‹æ ‡ä¸Šçš„é›¨æ°´åŠ èµ·æ¥å³å¯ã€‚

![fig 1](https://pic.leetcode-cn.com/4e0f426907d4c96c80e97fdff3a26b3aeabee48eaea3843385cb0a77fba1b770-file_1580965518713)

å…·ä½“æ¥è¯´ï¼Œå¦‚å›¾æˆ‘ä»¬å‡è®¾è¾“å…¥ä¸º `[0,1,0,2]`ï¼Œå‡­æ„Ÿè§‰ï¼Œæˆ‘ä»¬å¾—åˆ°æ¥å®Œé›¨æ°´åçš„ç»“æœå¦‚å³å›¾ã€‚å¯ä»¥çœ‹åˆ°ï¼Œåªæœ‰ä¸‹æ ‡ 2 çš„ä¸Šæ–¹å¯ä»¥æ¥åˆ°é›¨æ°´ï¼Œå…¶ä»–åœ°æ–¹çš„æ°´ä¼šå‘ä¸¤è¾¹â€œæµæ‰â€ï¼Œæ‰€ä»¥æ— æ³•æ¥åˆ°æ°´ã€‚

ä¸ºä»€ä¹ˆæ˜¯è¿™æ ·å‘¢ï¼Ÿé¦–å…ˆçœ‹ä¸‹æ ‡ 1 ï¼Œå®ƒå·¦è¾¹æœ€é«˜çš„æŸ±å­æ˜¯ä¸‹æ ‡ 0 ï¼Œå³è¾¹æœ€é«˜çš„æŸ±å­æ˜¯ä¸‹æ ‡ 3 ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæŸ±å­çš„è¾ƒå°å€¼æ¯”ä¸‹æ ‡ 1 è¦ä½ï¼Œæ‰€ä»¥ä¸‹æ ‡ 1 çš„ä¸Šæ–¹æ²¡æœ‰æ°´ã€‚ç›¸åï¼Œæˆ‘ä»¬çœ‹ä¸‹æ ‡ 2ï¼Œå®ƒå·¦è¾¹æœ€é«˜çš„æŸ±å­æ˜¯ä¸‹æ ‡ 1 ï¼Œå³è¾¹æœ€é«˜çš„æŸ±å­æ˜¯ä¸‹æ ‡ 3 ï¼Œè¿™ä¸¤ä¸ªæŸ±å­è¾ƒçŸ®çš„æ˜¯ä¸‹æ ‡ 1 ï¼Œå®ƒæ¯”ä¸‹æ ‡ 2 æœ¬èº«è¦é«˜ï¼Œæ‰€ä»¥ä¸‹æ ‡ 2 å¯ä»¥æ¥åˆ°æ°´ï¼Œæ¥çš„æ°´å°±æ˜¯é«˜åº¦å·®ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬éå†æ¯ä¸ªä¸‹æ ‡ï¼Œå¯»æ‰¾å®ƒå·¦è¾¹å’Œå³è¾¹æœ€é«˜çš„æŸ±å­ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥æ¥åˆ°æ°´ï¼Œå°†å¯æ¥æ°´çš„ç»“æœç´¯åŠ å³å¯ã€‚
### ä»£ç 
ä»£ç å¦‚ä¸‹ï¼š
```python []
class Solution:
    def trap(self, height: List[int]) -> int:
        ans = 0
        for i in range(len(height)):
            max_left, max_right = 0,0
            # å¯»æ‰¾ max_left
            for j in range(0,i):
                max_left = max(max_left,height[j])
            # å¯»æ‰¾ max_right
            for j in range(i,len(height)):
                max_right = max(max_right,height[j])
            if min(max_left,max_right) > height[i]:
                ans += min(max_left,max_right) - height[i]
        
        return ans
```
```C++ []
class Solution {
public:
    int trap(vector<int>& height) {
        int ans = 0;
        int n = height.size();
        int maxleft;
        int maxright;
        for (int i = 0;i < n;i++){
            maxleft = maxright = 0;
            for (int j = 0;j < i;j++){
                maxleft = max(maxleft,height[j]);
            }
            for (int k = i;k<n;k++){
                maxright = max(maxright,height[k]);
            }
            if (min(maxleft,maxright) > height[i]){
                ans += min(maxleft,maxright) - height[i];
            }
            
        }
        return ans;
    }
};
```
### å¤æ‚åº¦åˆ†æ
- æ—¶é—´å¤æ‚åº¦ï¼š$O(N^2)$ã€‚æœ€åæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯¹äºæ¯ä¸ªä¸‹æ ‡ï¼Œéƒ½è¦å‘å·¦å’Œå‘å³éå†ç›´åˆ°ä¸¤ç«¯ï¼Œå¤æ‚åº¦æ˜¯ N çš„å¹³æ–¹ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚ä½¿ç”¨äº†æœ‰é™çš„ `n`, `ans`, `maxleft`, `maxright`ã€‚


### æ–¹æ³•äºŒï¼šåŠ¨æ€è§„åˆ’
æˆ‘ä»¬å‘ç°åœ¨å¯»æ‰¾æ¯ä¸ªä¸‹æ ‡çš„å·¦è¾¹å’Œå³è¾¹æœ€é«˜çš„æŸ±å­æ—¶ï¼Œä¼šå¯¹æŸ±å­è¿›è¡Œåå¤æœç´¢å¯¼è‡´å¤æ‚åº¦é™ä½ï¼Œå‡å¦‚æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„ `maxleft` å’Œ `maxright`ï¼Œ`maxleft[i]` è¡¨ç¤ºä¸‹æ ‡ `i` å·¦è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦,`maxright[i]` è¡¨ç¤ºä¸‹æ ‡ `i` å³è¾¹æœ€é«˜æŸ±å­çš„é«˜åº¦ï¼Œå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€è¶Ÿéå†å°±å¯ä»¥å¾—åˆ°ç»“æœã€‚è¿™æ ·ç”±äºé¿å…äº†é‡å¤è®¡ç®—ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šé™ä½åˆ° O(N)ã€‚
### ä»£ç 

```python []
class Solution:
    def trap(self, height: List[int]) -> int:
        # è¾¹ç•Œæ¡ä»¶
        if not height: return 0
        n = len(height)
        maxleft = [0] * n
        maxright = [0] * n
        ans = 0
        # åˆå§‹åŒ–
        maxleft[0] = height[0]
        maxright[n-1] = height[n-1]
        # è®¾ç½®å¤‡å¿˜å½•ï¼Œåˆ†åˆ«å­˜å‚¨å·¦è¾¹å’Œå³è¾¹æœ€é«˜çš„æŸ±å­é«˜åº¦
        for i in range(1,n):
            maxleft[i] = max(height[i],maxleft[i-1])
        for j in range(n-2,-1,-1):
            maxright[j] = max(height[j],maxright[j+1])
        # ä¸€è¶Ÿéå†ï¼Œæ¯”è¾ƒæ¯ä¸ªä½ç½®å¯ä»¥å­˜å‚¨å¤šå°‘æ°´
        for i in range(n):
            if min(maxleft[i],maxright[i]) > height[i]:
                ans += min(maxleft[i],maxright[i]) - height[i]
        return ans
```

```C++ []
class Solution {
public:
    int trap(vector<int>& height) {
        if (height.size() == 0){
            return 0;
        }
        int n = height.size();
        vector<int> maxleft (n);
        vector<int> maxright (n);
        int ans = 0;
        maxleft[0] = height[0];
        maxright[n-1] = height[n-1];

        for (int i=1;i<n;i++){
            maxleft[i] = max(height[i], maxleft[i-1]);
        }
        for (int j=n-2;j>-1;j--){
            maxright[j] = max(height[j],maxright[j+1]);
        }
        for (int k=0;k<n;k++){
            if (min(maxleft[k],maxright[k]) > height[k]){
                ans += min(maxleft[k],maxright[k]) - height[k];
            } 
        }
        return ans;
    }
};
```

ç”±äºä½¿ç”¨äº†æ•°ç»„ï¼Œæˆ‘ä»¬çš„ç©ºé—´å¤æ‚åº¦ä¼šå¢åŠ åˆ° O(N),å¦‚ä½•èƒ½æŠŠç©ºé—´å¤æ‚åº¦ä¹Ÿé™ä½å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆæ³•ã€‚

### æ–¹æ³•ä¸‰ï¼šåŒæŒ‡é’ˆæ³•

åŒæŒ‡é’ˆæ³•å°±æ˜¯å°†ä¸Šè¾¹çš„ä¸€ä¸ªä¸‹æ ‡ `i`ï¼Œå˜ä¸ºä¸¤ä¸ªä¸‹æ ‡ `left`ï¼Œ`right`ï¼Œåˆ†åˆ«ä½äºè¾“å…¥æ•°ç»„çš„ä¸¤ç«¯ã€‚å‘ä¸­é—´ç§»åŠ¨æ—¶ï¼Œè¾¹ç§»åŠ¨è¾¹è®¡ç®—ã€‚

é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨ `maxleft` ä½œä¸º `0...left` çš„æœ€å¤§å€¼ï¼Œ`maxright` ä½œä¸º `right...ç»“å°¾` çš„æœ€å¤§å€¼ã€‚ä»£ç çœ‹ä¸æ‡‚çš„åœ°æ–¹å¯ä»¥çœ‹å¹»ç¯ç‰‡å¸®åŠ©ç†è§£~

<![å¹»ç¯ç‰‡1.JPG](https://pic.leetcode-cn.com/a19052580f3523c215b7944d750ff0c034cfcfe583e1873dca500267e870203b-%E5%B9%BB%E7%81%AF%E7%89%871.JPG),![å¹»ç¯ç‰‡2.JPG](https://pic.leetcode-cn.com/c15d169c19342138b709913a58f6bab3b6d4895b6815f77e10a8c4577d703412-%E5%B9%BB%E7%81%AF%E7%89%872.JPG),![å¹»ç¯ç‰‡3.JPG](https://pic.leetcode-cn.com/c2f42aa934e899f231d1d60a5dc6a464d3a6ab69ab6ebecdd7511e5ea2503a64-%E5%B9%BB%E7%81%AF%E7%89%873.JPG),![å¹»ç¯ç‰‡4.JPG](https://pic.leetcode-cn.com/fac95617d0414add81a235da1d5015f47d20956670e1d87e4e595598e3292b3c-%E5%B9%BB%E7%81%AF%E7%89%874.JPG),![å¹»ç¯ç‰‡5.JPG](https://pic.leetcode-cn.com/fc3cb0eb73cabdc82e7201c98bcfb537f175fb662ba2cc63f9f112d3e2faee0a-%E5%B9%BB%E7%81%AF%E7%89%875.JPG),![å¹»ç¯ç‰‡6.JPG](https://pic.leetcode-cn.com/31a68d7aa5516d87b558dde9235e7e474759fa5453e631de64a4e773c76080c4-%E5%B9%BB%E7%81%AF%E7%89%876.JPG),![å¹»ç¯ç‰‡7.JPG](https://pic.leetcode-cn.com/da480e642a313768df8ca2371903b26845f2195f31cdf7e8499885e896f95182-%E5%B9%BB%E7%81%AF%E7%89%877.JPG),![å¹»ç¯ç‰‡8.JPG](https://pic.leetcode-cn.com/168ceeaa3317c53e3a3b8c8746a9af5de0cc0c4f886f6ed56b2a3fa05e0b0986-%E5%B9%BB%E7%81%AF%E7%89%878.JPG),![å¹»ç¯ç‰‡9.JPG](https://pic.leetcode-cn.com/4e7e48716408f0dc95501b03d4944da3c2948f402bdbb983ca697866a1ceaa2e-%E5%B9%BB%E7%81%AF%E7%89%879.JPG),![å¹»ç¯ç‰‡10.JPG](https://pic.leetcode-cn.com/ce18c172ec3ff615e93898331ac016d636e8e13b5ea1c919285f7db1eed0f565-%E5%B9%BB%E7%81%AF%E7%89%8710.JPG),![å¹»ç¯ç‰‡11.JPG](https://pic.leetcode-cn.com/297edf34e9414d894a3d6f9262227529a2e01eab30351b73ec15b236c9840404-%E5%B9%BB%E7%81%AF%E7%89%8711.JPG)>


### ä»£ç 
```python []
class Solution:
    def trap(self, height: List[int]) -> int:
        # è¾¹ç•Œæ¡ä»¶
        if not height: return 0
        n = len(height)

        left,right = 0, n - 1  # åˆ†åˆ«ä½äºè¾“å…¥æ•°ç»„çš„ä¸¤ç«¯
        maxleft,maxright = height[0],height[n - 1]
        ans = 0

        while left <= right:
            maxleft = max(height[left],maxleft)
            maxright = max(height[right],maxright)
            if maxleft < maxright:
                ans += maxleft - height[left]
                left += 1
            else:
                ans += maxright - height[right]
                right -= 1

        return ans
```
```C++ []
class Solution {
public:
    int trap(vector<int>& height) {
        if(height.size() == 0){
            return 0;
        }
        int n = height.size();
        int left = 0;
        int right = n - 1;
        int maxleft = height[0];
        int maxright = height[n-1];
        int ans = 0;

        while (left <= right){
            maxleft = max(height[left],maxleft);
            maxright = max(height[right],maxright);
            if(maxleft < maxright){
                ans += maxleft - height[left];
                left++;
            }
            else{
                ans += maxright - height[right];
                right--;
            }
        }
        return ans;
    }
};
```
### å¤æ‚åº¦åˆ†æ
- æ—¶é—´å¤æ‚åº¦ï¼š$O(N)$ã€‚éå†äº†ä¸€éæ•°ç»„ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼š$O(1)$ã€‚ä½¿ç”¨äº†æœ‰é™çš„ `left`, `right`, `ans`, `maxleft`, `maxright`ã€‚

å¦‚æœ‰ç–‘é—®ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£~


PSï¼šæƒ³è¦ä¸€èµ·åŠªåŠ›çš„ç«¥é‹ä»¬å¯ä»¥å…³æ³¨æˆ‘åˆ›åŠçš„å…¬ä¼—å·ï¼šè…çƒ‚çš„æ©˜å­ğŸŠï¼Œè‡´åŠ›äºæ‘†è„±ç®—æ³•çš„æŠ½è±¡æ€ç»´ï¼Œå½»åº•ææ‡‚ç®—æ³•ï¼ŒåŒæ—¶å…¬ä¼—å·è¿˜ä¼šå‘å¸ƒé¢è¯•ä¸­çš„é«˜é¢‘çŸ¥è¯†ç‚¹ï¼Œä¸€èµ·åŠªåŠ›å§ï¼ğŸ˜‹