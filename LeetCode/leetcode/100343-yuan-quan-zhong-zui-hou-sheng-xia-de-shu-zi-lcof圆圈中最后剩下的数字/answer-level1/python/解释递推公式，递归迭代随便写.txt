æˆ‘ä»¬ç”¨ `f(n, m)` è¡¨ç¤ºä» n ä¸ªæ•°ä¸­æ¯æ¬¡åˆ é™¤ç¬¬ m ä¸ªæ•°ï¼ˆå…±åˆ é™¤äº† n - 1 æ¬¡ï¼‰ï¼Œæœ€åç•™ä¸‹çš„é‚£ä¸ªæ•°çš„**åºå·**ã€‚

æˆ‘ä»¬ä» `f(n, m)` åœºæ™¯ä¸‹åˆ é™¤çš„ç¬¬ 1 ä¸ªæ•°æ˜¯ä»åºå· 0 å¼€å§‹ï¼Œå‘åæ•° m ä¸ªæ•°å¾—åˆ°çš„ã€‚åˆ é™¤ç¬¬ä¸€ä¸ªæ•°åï¼Œå°†å‰©ä¸‹ n - 1 ä¸ªæ•°ï¼Œæ­¤æ—¶åœºæ™¯å˜ä¸º `f(n - 1, m)`ï¼Œç”¨äºè¡¨ç¤ºä» n - 1 ä¸ªæ•°ä¸­æ¯æ¬¡åˆ é™¤ç¬¬ m ä¸ªæ•°æœ€åç•™ä¸‹çš„æ•°çš„**åºå·**ã€‚

åœ¨å¾€ä¸‹çœ‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¾¾æˆä¸€ä¸ªå…±è¯†ï¼š**`f(n, m)` ä¸ `f(n - 1, m)` å¾—åˆ°çš„æ•°æ˜¯åŒä¸€ä¸ªæ•°ï¼ˆæœ€åå‰©ä¸‹çš„æ•°åœ¨æ¯ä¸€è½®ä¸­éƒ½ä¸å¯èƒ½è¢«åˆ é™¤ï¼‰ï¼Œåªæ˜¯åœ¨å®ƒä»¬æ‰€åœ¨çš„åœºæ™¯ä¸‹ï¼Œè¿™ä¸ªæ•°å­—çš„åºå·ä¸åŒç½¢äº†ã€‚**

é‚£ä¹ˆï¼Œä½•è°“ã€Œæ‰€åœ¨åœºæ™¯ï¼Œåºå·ä¸åŒã€ï¼Ÿ

è¿™é‡Œæ‰€è¯´çš„ã€Œåºå·ã€ä¸**æ‰€åœ¨åœºæ™¯ä¸‹é¦–æ¬¡é€‰å–åˆ é™¤æ•°å­—çš„å‡ºå‘ç‚¹æœ‰å…³**ï¼Œæˆ‘ä»¬ç›´æ¥çœ‹ä¸‹é¢˜ç›®ç»™å‡ºçš„ `n = 5, m = 3` è¿™ä¸ªä¾‹å­ï¼Œå·²çŸ¥ç­”æ¡ˆä¸º 3ã€‚

### ä¸åŒåœºæ™¯ä¸‹çš„ä¸åŒåºå·

#### f(n, m) åœºæ™¯

æ­¤æ—¶ `n = 5`ï¼Œç”±äºæˆ‘ä»¬ä»ç¬¬ 1 ä¸ªæ•°å­—å‡ºå‘ï¼Œæ‰€ä»¥ä»ç¬¬ 1 ä¸ªæ•°å­—å¼€å§‹ç¼–å·ï¼š

```
æ•°å­—ï¼š
0 1 2 3 4
åºå·ï¼š
0 1 2 3 4
```

å¯ä»¥çœ‹åˆ°ç­”æ¡ˆ 3 åœ¨è¯¥åœºæ™¯ä¸‹çš„åºå·ä¸º 3ã€‚

#### f(n - 1, m) åœºæ™¯

æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»åœ¨ `f(n, m)` åœºæ™¯ä¸‹åˆ é™¤ä¸€ä¸ªæ•°äº†ï¼Œè¿™ä¸ªæ•°æ˜¯ 2ï¼Œå› æ­¤æˆ‘ä»¬è¦ä» 3 å¼€å§‹é‡æ–°ç¼–å·ï¼š

```
æ•°å­—ï¼š
0 1 3 4
åºå·ï¼š
2 3 0 1
```

ç­”æ¡ˆ 3 åœ¨è¯¥åœºæ™¯ä¸‹çš„åºå·ä¸º 0ã€‚

### ä¸¤è€…åºå·çš„å…³ç³»

æˆ‘ä»¬çŸ¥é“ï¼Œä» `f(n - m)` åœºæ™¯ä¸‹åˆ é™¤çš„ç¬¬ä¸€ä¸ªæ•°çš„**åºå·**æ˜¯ `(m - 1) % n`ï¼Œé‚£ä¹ˆ `f(n - 1, m)` åœºæ™¯å°†ä½¿ç”¨è¢«åˆ é™¤æ•°å­—çš„ä¸‹ä¸€ä¸ªæ•°ï¼Œå³åºå· `m % n` ä½œä¸ºå®ƒçš„ 0 åºå·ã€‚

è®¾ `f(n - 1, m)` çš„ç»“æœä¸º `x`ï¼Œ`x` æ˜¯ä» `f(n, m)` åœºæ™¯ä¸‹åºå·ä¸º `m % n` çš„æ•°å­—å‡ºå‘æ‰€è·å¾—çš„ç»“æœï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š`m % n + x` æ˜¯è¯¥æ•°å­—åœ¨ `f (n, m)` åœºæ™¯ä¸‹çš„ç»“æœåºå·ã€‚å³ï¼š

```
f(n, m) = m % n + x
```
ä½†ç”±äº `m % n + x` å¯èƒ½ä¼šè¶…è¿‡ n çš„èŒƒå›´ï¼Œæ‰€ä»¥æˆ‘ä»¬å†å–ä¸€æ¬¡æ¨¡ï¼š

```
f(n , m) = (m % n + x) % n = (m + x) % n
```

å°† `f(n - 1, m)` ä»£å›ï¼Œå¾—åˆ°é€’æ¨å…¬å¼ï¼š

```
f(n, m) = (m + f(n - 1, m)) % n
```

æœ‰äº†é€’æ¨å…¬å¼åï¼Œæƒ³é€’å½’å°±é€’å½’ï¼Œæƒ³è¿­ä»£å°±è¿­ä»£å’¯~

### å…·ä½“å®ç°

```python
sys.setrecursionlimit(100000)

class Solution:
    def lastRemaining(self, n: int, m: int) -> int:
        return self.f(n, m)

    def f(self, n, m):
        if n == 0:
            return 0
        x = self.f(n - 1, m)
        return (m + x) % n
```

å„ä½å¤§ä½¬çš„å›¾å®åœ¨ç”»å¾—å¤ªå¥½äº†ï¼Œæˆ‘å°±ä¸çŒ®ä¸‘äº†ï¼ˆé€ƒ

----

## ğŸ±

- æˆ‘çš„é¢˜è§£é¡¹ç›®ï¼š[ç‚¹å‡»å‰å¾€](https://github.com/JalanJiang/leetcode-notebook)
- å¦‚æœä½ å¯¹åšé¢˜å’Œåˆ†äº«é¢˜è§£æ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ å…¥ [LeetCode åˆ·é¢˜å°åˆ†é˜Ÿ](https://github.com/leetcode-notebook/leetcode-notebook.github.io/blob/master/README.md)
- å¦‚æœä½ è§‰å¾—æ–‡ç« å†™å¾—ä¸é”™ï¼Œæ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€Œç¼–ç¨‹æ‹¯æ•‘ä¸–ç•Œã€ï¼Œå…¬ä¼—å·ä¸“æ³¨äºç¼–ç¨‹åŸºç¡€ä¸æœåŠ¡ç«¯ç ”å‘ï¼Œå®šæœŸåˆ†äº«ç®—æ³•ä¸æ•°æ®ç»“æ„å¹²è´§~

![](https://pic.leetcode-cn.com/ae3bd6547d0aa946436706f70167767b1cdee1429535ad0d6535d46c684365ae-file_1576126672599)