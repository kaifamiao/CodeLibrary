### 解题思路
其实通过观察发现，对于最后一个数，如果只看第一次和最后一次操作，那么它就是关的，所以它的状态取决中中间过程对它进行了多少操作，而总的灯泡数等于上一轮的结果+1或者+0（最后一个开着或者灭着），我们考察最后一个数被操作了多少次，就是看有多少个i轮可以处理到它，也即它模几个i等于0，奇数次操作，就是开着，偶数次，就是灭着。就是求它除去1和本身的因数个数，因为因数都是成对出现的，只有当这个数是完全平方数才能得到奇数个因数，才能是开着。

### 代码

```cpp
class Solution {
public:
    int bulbSwitch(int n) {
        if(n == 1)
            return 1;
        return (int)sqrt(n);
    }
};
```