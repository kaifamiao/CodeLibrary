
ä¸»è¦æ€è·¯å°±æ˜¯DFSã€‚

1:)å®šä¹‰å››ä¸ªæ–¹å‘1:â†‘,2:â†,3:â†“,4:â†’,æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„directListæ¥å­˜å‚¨å½“å‰è¿™ä¸€æ­¥jæ ¹æ®ä¸Šä¸€æ­¥çš„æ–¹å‘iè®¡ç®—åˆ°æ–¹å‘n,è¡¨è¾¾ä¸ºdirectList[i][j]=d.
ä¾‹å¦‚dict[4][3]=1è¡¨ç¤ºå½“å‰è¿™ä¸ªæ ¼å­çš„å€¼ä¸º3,å‰ä¸€ä¸ªçš„æ–¹å‘ä¸ºâ†’(4),å½“å‰è¿™ä¸€ä¸ªæ ¼å­ä¸ºå€¼ä¸º3,è®¡ç®—åˆ°çš„æ–¹å‘ä¸ºâ†‘(1),ä¹Ÿå°±æ˜¯ä¸‹ä¸€ä¸ªæ ¼å­è¦å’Œâ†‘åŒ¹é…ã€‚å½“dçš„å€¼ä¸º0æ—¶,è¡¨ç¤ºjè¿™ä¸ªæ ¼å­ä¸ªæ–¹å‘iä¸èƒ½æ„æˆè”é€šã€‚
![WechatIMG51.jpeg](https://pic.leetcode-cn.com/ed4367aa6dc5ece127fb4874f5e5483e0cee534fce8dbc461e7e24de0d8dd630-WechatIMG51.jpeg)

2:)ç”¨ä¸€ä¸ªæ•°ç»„visitedArrayæ¥å­˜å‚¨å·²ç»è®¿é—®è¿‡çš„èŠ‚ç‚¹,è®¿é—®è¿‡çš„å°±ç›´æ¥è¿”å›

3:)å°±æ˜¯ç»†åˆ†å„ç§æƒ…å†µï¼Œä»£ç æœ‰è¯¦ç»†æ³¨é‡Š

    class Solution {
        func hasValidPath(_ grid: [[Int]]) -> Bool {
            //åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹,é‚£ä¹ˆè‚¯å®šæ˜¯æ»¡è¶³æƒ…å†µ
            if (grid[0].count == 1){
                return true
            }
            //eg:direct[i][j]è¡¨ç¤ºå‰ä¸€ä¸ªçš„æ–¹å‘ä¸ºi,å½“å‰è¿™ä¸ªæ»¡è¶³æ¡ä»¶çš„å€¼ä¸ºj,è®¡ç®—åˆ°çš„ç»“æŸçš„æ–¹å‘,å°±æ˜¯ä¸‹ä¸€ä¸ªæ–¹å‘
            let directList: [[Int]] =  [
                                            [0, 0, 0, 0, 0, 0, 0],
                                            [0, 0, 1, 2, 4, 0, 0],   // â†‘
                                            [0, 2, 0, 0, 3, 0, 1],   // â†
                                            [0, 0, 3, 0, 0, 2, 4],   // â†“
                                            [0, 4, 0, 3, 0, 1, 0]    // â†’
                                        ]
            var visitedArray: [[Int]] = [[Int]] (repeating: ([Int] (repeating: 0, count: grid[0].count)), count: grid.count)
            return hasValidPath(0, 0, grid,  &visitedArray, -1, directList)
        }
        
        //å½“å‰è¿™ä¸ªèŠ‚ç‚¹çš„rowï¼Œcolumn,èŠ‚ç‚¹æ•°ç»„grid,è®°å¿†åŒ–æ•°ç»„visitedArray,å‰ä¸€ä¸ªçš„æ–¹å‘direct(-1è¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹æ˜¯ğŸ•–),æ˜¯å¦èƒ½å¤Ÿæ„æˆè”é€šçš„è”é€šæ•°ç»„.
        func hasValidPath(_ row: Int, _ column: Int, _ grid: [[Int]], _ visitedArray:inout [[Int]], _ direct: Int, _ directList:[[Int]]) -> Bool {
            let m = grid.count
            let n = grid[0].count
            let val = grid[row][column]
            
            if (row == m-1 && column == n-1){
                //å¦‚æœéå†åˆ°äº†æœ€åä¸€ä¸ªæ ¼å­,å¹¶ä¸”èƒ½å¤Ÿå’Œå‰ä¸€ä¸ªæ–¹å‘æ„æˆè”é€š,é‚£ä¹ˆè¿”å›ture
                return (directList[direct][val] > 0)
            }

            if (visitedArray[row][column] == 1){
                //å¦‚æœè¿™ä¸ªèŠ‚ç‚¹è®¿é—®è¿‡,é‚£ä¹ˆè¿”å›false
                return false
            }
            visitedArray[row][column] = 1  //è¿™ä¸ªèŠ‚ç‚¹ç½®ä½è®¿é—®è¿‡
            if (direct == -1 ){
                //directä¸º-1è¡¨ç¤ºæ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
                if ((val == 1 || val == 6) && column + 1 < n){
                    //ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸º1æˆ–è€…æ˜¯6,åˆ¤æ–­æ˜¯å¦è¶Šç•Œç„¶åè®¡ç®—çš„æ–¹å‘ä¸ºâ†’(4)
                    return hasValidPath(row, column+1, grid, &visitedArray, 4, directList)
                }else if ((val == 2 || val == 3) && row + 1 < m){
                    //ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸º2æˆ–è€…æ˜¯3,åˆ¤æ–­æ˜¯å¦è¶Šç•Œç„¶åè®¡ç®—çš„æ–¹å‘ä¸ºâ†“(3)
                    return hasValidPath(row + 1, column, grid, &visitedArray, 3, directList)
                }else if (val == 4){
                    //ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸º4ï¼Œæœ‰å‘å³å’Œå‘ä¸‹ä¸¤æ¡è·¯
                    var res1 = false
                    if (column + 1 < n){
                    res1 = hasValidPath(row, column+1, grid, &visitedArray, 4, directList)
                    }
                    var res2 = false
                    if (row + 1 < m){
                        res2 = hasValidPath(row + 1, column, grid, &visitedArray, 3, directList)
                    }
                    return (res1 || res2)
                }
                //ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸º5çš„è¯ï¼Œæ˜¯ä¸æ»¡è¶³æ¡ä»¶çš„(åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µé™¤å¤–,åœ¨æœ€å¼€å§‹å·²ç»å¤„ç†è¿™ä¸ªè¾¹ç•Œæ¡ä»¶)
            }else{
                let temp = directList[direct][val] //ä¸‹ä¸€ä¸ªçš„æ–¹å‘ä¸ºtempï¼Œtemp>0è¡¨ç¤ºè”é€š
                var tempRow = row
                var tempColoumn = column
                //æ–¹å‘å’Œå½“å‰è¿™ä¸ªèŠ‚ç‚¹çš„å€¼èƒ½å¤Ÿè”é€š,å¹¶ä¸”ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿæ²¡è¶Šç•Œ
                if (temp > 0 && isNextValidate(temp, &tempRow, &tempColoumn, grid)){
                    return hasValidPath(tempRow, tempColoumn, grid, &visitedArray, temp, directList)
                }
            }
            return false
        }
        
        //æ ¹æ®æ–¹å‘æ¥åˆ¤æ–­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦è¶Šç•Œ
        func isNextValidate(_ direct: Int, _ row:inout Int, _ column:inout Int, _ grid: [[Int]]) -> Bool{
            if (direct == 1 && row - 1 >= 0){
                //ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æ–¹å‘æ˜¯å‘ä¸Š,é‚£ä¹ˆåˆ¤æ–­row-1æ˜¯å¦è¶Šç•Œï¼Œå…¶ä»–çš„åŒç†
                row = row - 1
                return true
            }else if (direct == 2 && column - 1 >= 0){
                column = column - 1
                return true
            }else if (direct == 3 && row + 1 < grid.count){
                row = row + 1
                return true
            }else if (direct == 4 && column + 1 < grid[0].count){
                column = column + 1
                return true
            }
            return false
        }
    }