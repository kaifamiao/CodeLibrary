### ä¸¤ç§è§£æ³•

##### 1.å›æº¯

```java
	private List<List<String>> res;
    private char[] chars;
    private int n;
    private boolean[][] isP;
	public List<List<String>> partition2(String s) {
        res = new ArrayList<>();
        if (s == null || s.length() == 0)
            return res;
        chars = s.toCharArray();
        n = chars.length;
        markP();
        backTrack2(new Stack<String>(), 0);
        return res;
    }

    private void backTrack2(Stack<String> stack, int curIndex) {
        if (curIndex == n) {
            List<String> tempRes = new ArrayList<>(stack);
            res.add(tempRes);
            return;
        }
        for (int i = curIndex; i < n; i++){
            if(isP[curIndex][i]){
                stack.push(String.valueOf(chars,curIndex, i - curIndex + 1));
                backTrack2(stack, i + 1);
                stack.pop();
            }
        }
    }

    private void markP() {
        isP = new boolean[n][n];
        for (int i = 0; i < n; i++)
            isP[i][i] = true;
        for (int i = 0; i < n; i++) {
            for (int j = 1; i - j >= 0 && i + j < n; j++) { // ä»¥å­—ç¬¦ä¸ºä¸­å¿ƒçš„å­ä¸²çš„åˆ¤æ–­
                if (chars[i - j] != chars[i + j]) break;
                isP[i - j][i + j] = true;
            }
            for (int j = 0; i - j >= 0 && i + j + 1 < n; j++) {
                if (chars[i - j] != chars[i + j + 1]) break;
                isP[i - j][i + j + 1] = true;
            }
        }
    }
```

æ€è·¯åˆ†æï¼š

* æœ¬é¢˜è¦æ±‚çš„ç»“æœï¼Œæ˜¯ä¸€ä¸ªå­å­—ç¬¦ä¸²çš„é›†åˆã€‚é›†åˆï¼Œç»„åˆé—®é¢˜ä¸€èˆ¬éƒ½ä¼šæƒ³åˆ°å›æº¯ã€‚
* åŠ å…¥æˆ‘ä»¬ç°åœ¨è¦é€‰æ‹©ç¬¬ä¸€ä¸ªæ‹†åˆ†çš„å‡ºçš„å­å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦å¯èƒ½ä¸º1ï¼Œå¯èƒ½ä¸º2...å¯èƒ½ä¸ºnã€‚å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¸º1ï¼Œé‚£ä¹ˆåç»­è¦åœ¨å­—ä¸²`[1, n - 1]`ä¸Šè¿›è¡Œæ‹†åˆ†ï¼›å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ä¸º2ï¼Œé‚£ä¹ˆåç»­è¦åœ¨å­ä¸²`[2, n - 1]`ä¸Šè¿›è¡Œæ‹†åˆ†...çŸ¥é“æ‰€æœ‰å­—ç¬¦éƒ½è¢«æ‹†åˆ†ã€‚è¿™å°±æ˜¯é—®é¢˜çš„é€’å½’ç»“æ„ã€‚
* é€’å½’å‡½æ•°`private void backTrack2(Stack<String> stack, int curIndex)`ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨äºå­˜æ”¾æ‹†åˆ†å‡ºæ¥çš„å­å­—ç¬¦ä¸²çš„ï¼Œå¾ˆæ–¹ä¾¿åœ¨å›æº¯çš„æ—¶å€™ï¼Œå°†å½“å‰å­—ç¬¦ä¸²ä»ç»“æœé›†ä¸­å¼¹å‡ºã€‚ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºï¼Œç°åœ¨æ‹†åˆ†çš„å­—ç¬¦ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚
    * å½“`curIndex == n`æ—¶ï¼Œå·²ç»æ²¡æœ‰å¯ä»¥æ‹†åˆ†çš„å­—ç¬¦ï¼Œæ‰€ä»¥è¦å°†ç»“æœæ”¾å…¥`res`ä¸­ï¼Œç„¶åè¿”å›ã€‚
    * é€’å½’çš„æ—¶å€™ï¼Œä¸‹ä¸€ä¸ªå­å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®ä¸º`curIndex`ï¼Œç»“æŸä½ç½®çš„ç´¢å¼•ç”¨`i`è¡¨ç¤ºï¼Œå¯å–èŒƒå›´`[curIndex, n - 1]`ã€‚åœ¨é€’å½’ä¹‹å‰é¦–å…ˆè¦ä¿è¯`[curIndex, i]`è¿™ä¸ªå­ä¸²æ˜¯å›æ–‡å­ä¸²ï¼Œå¦åˆ™ç»“æœæ˜¯ä¸æ­£ç¡®çš„ã€‚
    * å¦‚æœ`[curIndex, i]`è¿™ä¸ªå­ä¸²æ˜¯å›æ–‡å­ä¸²ï¼Œé‚£ä¹ˆå°†å­ä¸²å…¥æ ˆï¼Œç„¶åé€’å½’è°ƒç”¨`backTrack2(stack, i + 1);`ã€‚`i+1`å°±æ˜¯ä¸‹ä¸€æ¬¡æ‹†åˆ†å­—ç¬¦ä¸²çš„èµ·å§‹ç´¢å¼•ã€‚
* é—®é¢˜çš„å…³é”®å°±æˆäº†å¦‚ä½•åˆ¤æ–­å›æ–‡ï¼Œç”±äºæœ¬é¢˜å¯èƒ½æ¶‰åŠåˆ°é‡å¤çš„å­ä¸²çš„ä½¿ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆå°†æ‰€æœ‰å›æ–‡å­ä¸²æ‰¾å‡ºæ¥ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚å‚è€ƒ [5.æœ€é•¿å›æ–‡å­ä¸²](https://github.com/ustcyyw/yyw_algorithm/blob/master/medium/String/longestPalindrome5.md)é‡Œçš„åšæ³•ï¼š
    * ä¿ç•™çŠ¶æ€ç±»ä¼¼åŠ¨æ€è§„åˆ’æ–¹æ³•çš„çŠ¶æ€å®šä¹‰`isP[i][j]`ä¸ºçœŸï¼Œè¡¨ç¤ºå­å­—ç¬¦ä¸²`[i, j]`ä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚
    * è®¡ç®—`isP[][]`åˆ™é€šè¿‡ä¸­å¿ƒæ‰©å±•çš„æ–¹å¼ã€‚

è¿è¡Œç»“æœï¼š

* æ‰§è¡Œç”¨æ—¶ :2 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†99.86%çš„ç”¨æˆ·
* å†…å­˜æ¶ˆè€— :42.1 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†7.66%çš„ç”¨æˆ·

##### 2.å›æº¯ ä½†æ˜¯å¾ˆéº»çƒ¦ï¼ˆç•¥ï¼‰

```java
	private List<List<String>> res;
    private char[] chars;
    public List<List<String>> partition(String s) {
        res = new ArrayList<>();
        if(s == null || s.length() == 0)
            return res;
        chars = s.toCharArray();
        for(int i = 1; i <= s.length(); i++) // i è¡¨ç¤ºæ‹†åˆ†æˆå¤šå°‘ä¸ªå­ä¸²
            backTrack(new String[i], i, 0, -1);
        return res;
    }

    /**
     *
     * @param k æ‹†åˆ†æˆå¤šå°‘ä¸ªå­ä¸²
     * @param curIndex å½“å‰åœ¨æ‰¾ç¬¬å‡ ä¸ªå­ä¸² ä»0å¼€å§‹
     * @param pre ä¸Šä¸€ä¸ªå­ä¸²æœ€åä¸€ä¸ªå­—ç¬¦åœ¨charsä¸­çš„ç´¢å¼•
     * @param temp å­˜æ”¾å­ä¸²çš„æ•°ç»„
     */
    private void backTrack(String[] temp, int k, int curIndex, int pre){
        if(curIndex == k){
            if(pre == chars.length - 1){
                List<String> tempRes = new ArrayList<>();
                for(String i : temp)
                    tempRes.add(i);
                res.add(tempRes);
            }
            return;
        }
        for(int length = 1; length <= chars.length - pre - k + curIndex; length++){
            if(isValid(pre + 1, pre + length)){
                temp[curIndex] = String.valueOf(chars, pre + 1, length);
                backTrack(temp, k, curIndex + 1, pre + length);
            }
        }
    }

    private boolean isValid(int lo, int hi){
        while(lo < hi){
            if(chars[lo++] != chars[hi--])
                return false;
        }
        return true;
    }
```

æ€è·¯åˆ†æï¼š

è¿è¡Œç»“æœï¼š

* æ‰§è¡Œç”¨æ—¶ :17 ms, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†6.46%çš„ç”¨æˆ·
* å†…å­˜æ¶ˆè€— :42.7 MB, åœ¨æ‰€æœ‰ Java æäº¤ä¸­å‡»è´¥äº†6.22%çš„ç”¨æˆ·

æ›´å¤šLeetCodeé¢˜è§£è¯·çœ‹æˆ‘çš„[github](https://github.com/ustcyyw/yyw_algorithm)ï¼Œåœ°å€https://github.com/ustcyyw/yyw_algorithmã€‚è¿˜æœ‰åˆ«çš„å°é¡¹ç›®ä¹Ÿå¾ˆå¥½ç©~å‘å¾®æ±‚ä¸ªå°æ˜Ÿæ˜ŸğŸ’–